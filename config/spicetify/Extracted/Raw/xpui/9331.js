"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[9331],{49331:(t,r,n)=>{n.r(r),n.d(r,{extractColors:()=>l});var e=n(41570);const o="https://local-image.spotify.com";let i;!function(t){t[t.ARRAY_BUFFER=0]="ARRAY_BUFFER",t[t.IMAGE_BITMAP=1]="IMAGE_BITMAP"}(i||(i={}));var a=n(73119),s=n.n(a);var u=n(52071);const c=new function(){return s()('(()=>{var t={1452:(t,r,n)=>{var e=n(7907),o=n(8599),i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not a function")}},6654:(t,r,n)=>{var e=n(7907),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||e(t))return t;throw i("Can\'t set "+o(t)+" as a prototype")}},4972:(t,r,n)=>{var e=n(4388),o=String,i=TypeError;t.exports=function(t){if(e(t))return t;throw i(o(t)+" is not an object")}},2916:t=>{t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},1615:(t,r,n)=>{"use strict";var e,o,i,a=n(2916),s=n(6840),u=n(8770),c=n(7907),h=n(4388),f=n(6232),l=n(6039),p=n(8599),g=n(4137),b=n(9440),v=n(8388),y=n(2070),d=n(6782),m=n(9195),w=n(9610),x=n(9105),_=n(300),A=_.enforce,S=_.get,M=u.Int8Array,T=M&&M.prototype,R=u.Uint8ClampedArray,I=R&&R.prototype,E=M&&d(M),O=T&&d(T),B=Object.prototype,j=u.TypeError,C=w("toStringTag"),P=x("TYPED_ARRAY_TAG"),$="TypedArrayConstructor",G=a&&!!m&&"Opera"!==l(u.opera),F=!1,H={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},D=function(t){var r=d(t);if(h(r)){var n=S(r);return n&&f(n,$)?n[$]:D(r)}},z=function(t){if(!h(t))return!1;var r=l(t);return f(H,r)||f(L,r)};for(e in H)(i=(o=u[e])&&o.prototype)?A(i)[$]=o:G=!1;for(e in L)(i=(o=u[e])&&o.prototype)&&(A(i)[$]=o);if((!G||!c(E)||E===Function.prototype)&&(E=function(){throw j("Incorrect invocation")},G))for(e in H)u[e]&&m(u[e],E);if((!G||!O||O===B)&&(O=E.prototype,G))for(e in H)u[e]&&m(u[e].prototype,O);if(G&&d(I)!==O&&m(I,O),s&&!f(O,C))for(e in F=!0,v(O,C,{configurable:!0,get:function(){return h(this)?this[P]:void 0}}),H)u[e]&&g(u[e],P,e);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:G,TYPED_ARRAY_TAG:F&&P,aTypedArray:function(t){if(z(t))return t;throw j("Target is not a typed array")},aTypedArrayConstructor:function(t){if(c(t)&&(!m||y(E,t)))return t;throw j(p(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,r,n,e){if(s){if(n)for(var o in H){var i=u[o];if(i&&f(i.prototype,t))try{delete i.prototype[t]}catch(n){try{i.prototype[t]=r}catch(t){}}}O[t]&&!n||b(O,t,n?r:G&&T[t]||r,e)}},exportTypedArrayStaticMethod:function(t,r,n){var e,o;if(s){if(m){if(n)for(e in H)if((o=u[e])&&f(o,t))try{delete o[t]}catch(t){}if(E[t]&&!n)return;try{return b(E,t,n?r:G&&E[t]||r)}catch(t){}}for(e in H)!(o=u[e])||o[t]&&!n||b(o,t,r)}},getTypedArrayConstructor:D,isView:function(t){if(!h(t))return!1;var r=l(t);return"DataView"===r||f(H,r)||f(L,r)},isTypedArray:z,TypedArray:E,TypedArrayPrototype:O}},2166:(t,r,n)=>{var e=n(9552);t.exports=function(t,r){for(var n=0,o=e(r),i=new t(o);o>n;)i[n]=r[n++];return i}},5833:(t,r,n)=>{var e=n(9552);t.exports=function(t,r){for(var n=e(t),o=new r(n),i=0;i<n;i++)o[i]=t[n-i-1];return o}},9159:(t,r,n)=>{var e=n(9552),o=n(9927),i=RangeError;t.exports=function(t,r,n,a){var s=e(t),u=o(n),c=u<0?s+u:u;if(c>=s||c<0)throw i("Incorrect index");for(var h=new r(s),f=0;f<s;f++)h[f]=f===c?a:t[f];return h}},3893:(t,r,n)=>{var e=n(6387),o=e({}.toString),i=e("".slice);t.exports=function(t){return i(o(t),8,-1)}},6039:(t,r,n)=>{var e=n(2594),o=n(7907),i=n(3893),a=n(9610)("toStringTag"),s=Object,u="Arguments"==i(function(){return arguments}());t.exports=e?i:function(t){var r,n,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,r){try{return t[r]}catch(t){}}(r=s(t),a))?n:u?i(r):"Object"==(e=i(r))&&o(r.callee)?"Arguments":e}},5180:(t,r,n)=>{var e=n(2687);t.exports=!e((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},4137:(t,r,n)=>{var e=n(6840),o=n(1002),i=n(79);t.exports=e?function(t,r,n){return o.f(t,r,i(1,n))}:function(t,r,n){return t[r]=n,t}},79:t=>{t.exports=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}}},8388:(t,r,n)=>{var e=n(7083),o=n(1002);t.exports=function(t,r,n){return n.get&&e(n.get,r,{getter:!0}),n.set&&e(n.set,r,{setter:!0}),o.f(t,r,n)}},9440:(t,r,n)=>{var e=n(7907),o=n(1002),i=n(7083),a=n(9049);t.exports=function(t,r,n,s){s||(s={});var u=s.enumerable,c=void 0!==s.name?s.name:r;if(e(n)&&i(n,c,s),s.global)u?t[r]=n:a(r,n);else{try{s.unsafe?t[r]&&(u=!0):delete t[r]}catch(t){}u?t[r]=n:o.f(t,r,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},9049:(t,r,n)=>{var e=n(8770),o=Object.defineProperty;t.exports=function(t,r){try{o(e,t,{value:r,configurable:!0,writable:!0})}catch(n){e[t]=r}return r}},6840:(t,r,n)=>{var e=n(2687);t.exports=!e((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4400:t=>{var r="object"==typeof document&&document.all,n=void 0===r&&void 0!==r;t.exports={all:r,IS_HTMLDDA:n}},2763:(t,r,n)=>{var e=n(8770),o=n(4388),i=e.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},7746:t=>{t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},5977:(t,r,n)=>{var e,o,i=n(8770),a=n(7746),s=i.process,u=i.Deno,c=s&&s.versions||u&&u.version,h=c&&c.v8;h&&(o=(e=h.split("."))[0]>0&&e[0]<4?1:+(e[0]+e[1])),!o&&a&&(!(e=a.match(/Edge\\/(\\d+)/))||e[1]>=74)&&(e=a.match(/Chrome\\/(\\d+)/))&&(o=+e[1]),t.exports=o},2687:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},8221:(t,r,n)=>{var e=n(2687);t.exports=!e((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},5023:(t,r,n)=>{var e=n(8221),o=Function.prototype.call;t.exports=e?o.bind(o):function(){return o.apply(o,arguments)}},9739:(t,r,n)=>{var e=n(6840),o=n(6232),i=Function.prototype,a=e&&Object.getOwnPropertyDescriptor,s=o(i,"name"),u=s&&"something"===function(){}.name,c=s&&(!e||e&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:u,CONFIGURABLE:c}},3661:(t,r,n)=>{var e=n(6387),o=n(1452);t.exports=function(t,r,n){try{return e(o(Object.getOwnPropertyDescriptor(t,r)[n]))}catch(t){}}},6387:(t,r,n)=>{var e=n(8221),o=Function.prototype,i=o.call,a=e&&o.bind.bind(i,i);t.exports=e?a:function(t){return function(){return i.apply(t,arguments)}}},9484:(t,r,n)=>{var e=n(8770),o=n(7907);t.exports=function(t,r){return arguments.length<2?(n=e[t],o(n)?n:void 0):e[t]&&e[t][r];var n}},6824:(t,r,n)=>{var e=n(1452),o=n(2281);t.exports=function(t,r){var n=t[r];return o(n)?void 0:e(n)}},8770:(t,r,n)=>{var e=function(t){return t&&t.Math==Math&&t};t.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},6232:(t,r,n)=>{var e=n(6387),o=n(3396),i=e({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,r){return i(o(t),r)}},942:t=>{t.exports={}},1:(t,r,n)=>{var e=n(6840),o=n(2687),i=n(2763);t.exports=!e&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},4913:(t,r,n)=>{var e=n(6387),o=n(7907),i=n(35),a=e(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},300:(t,r,n)=>{var e,o,i,a=n(6891),s=n(8770),u=n(4388),c=n(4137),h=n(6232),f=n(35),l=n(2491),p=n(942),g="Object already initialized",b=s.TypeError,v=s.WeakMap;if(a||f.state){var y=f.state||(f.state=new v);y.get=y.get,y.has=y.has,y.set=y.set,e=function(t,r){if(y.has(t))throw b(g);return r.facade=t,y.set(t,r),r},o=function(t){return y.get(t)||{}},i=function(t){return y.has(t)}}else{var d=l("state");p[d]=!0,e=function(t,r){if(h(t,d))throw b(g);return r.facade=t,c(t,d,r),r},o=function(t){return h(t,d)?t[d]:{}},i=function(t){return h(t,d)}}t.exports={set:e,get:o,has:i,enforce:function(t){return i(t)?o(t):e(t,{})},getterFor:function(t){return function(r){var n;if(!u(r)||(n=o(r)).type!==t)throw b("Incompatible receiver, "+t+" required");return n}}}},3594:(t,r,n)=>{var e=n(6039);t.exports=function(t){var r=e(t);return"BigInt64Array"==r||"BigUint64Array"==r}},7907:(t,r,n)=>{var e=n(4400),o=e.all;t.exports=e.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},2281:t=>{t.exports=function(t){return null==t}},4388:(t,r,n)=>{var e=n(7907),o=n(4400),i=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:e(t)||t===i}:function(t){return"object"==typeof t?null!==t:e(t)}},1028:t=>{t.exports=!1},6472:(t,r,n)=>{var e=n(9484),o=n(7907),i=n(2070),a=n(2839),s=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var r=e("Symbol");return o(r)&&i(r.prototype,s(t))}},9552:(t,r,n)=>{var e=n(2558);t.exports=function(t){return e(t.length)}},7083:(t,r,n)=>{var e=n(6387),o=n(2687),i=n(7907),a=n(6232),s=n(6840),u=n(9739).CONFIGURABLE,c=n(4913),h=n(300),f=h.enforce,l=h.get,p=String,g=Object.defineProperty,b=e("".slice),v=e("".replace),y=e([].join),d=s&&!o((function(){return 8!==g((function(){}),"length",{value:8}).length})),m=String(String).split("String"),w=t.exports=function(t,r,n){"Symbol("===b(p(r),0,7)&&(r="["+v(p(r),/^Symbol\\(([^)]*)\\)/,"$1")+"]"),n&&n.getter&&(r="get "+r),n&&n.setter&&(r="set "+r),(!a(t,"name")||u&&t.name!==r)&&(s?g(t,"name",{value:r,configurable:!0}):t.name=r),d&&n&&a(n,"arity")&&t.length!==n.arity&&g(t,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?s&&g(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var e=f(t);return a(e,"source")||(e.source=y(m,"string"==typeof r?r:"")),t};Function.prototype.toString=w((function(){return i(this)&&l(this).source||c(this)}),"toString")},5303:t=>{var r=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var e=+t;return(e>0?n:r)(e)}},1002:(t,r,n)=>{var e=n(6840),o=n(1),i=n(3609),a=n(4972),s=n(7586),u=TypeError,c=Object.defineProperty,h=Object.getOwnPropertyDescriptor,f="enumerable",l="configurable",p="writable";r.f=e?i?function(t,r,n){if(a(t),r=s(r),a(n),"function"==typeof t&&"prototype"===r&&"value"in n&&p in n&&!n[p]){var e=h(t,r);e&&e[p]&&(t[r]=n.value,n={configurable:l in n?n[l]:e[l],enumerable:f in n?n[f]:e[f],writable:!1})}return c(t,r,n)}:c:function(t,r,n){if(a(t),r=s(r),a(n),o)try{return c(t,r,n)}catch(t){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(t[r]=n.value),t}},6782:(t,r,n)=>{var e=n(6232),o=n(7907),i=n(3396),a=n(2491),s=n(5180),u=a("IE_PROTO"),c=Object,h=c.prototype;t.exports=s?c.getPrototypeOf:function(t){var r=i(t);if(e(r,u))return r[u];var n=r.constructor;return o(n)&&r instanceof n?n.prototype:r instanceof c?h:null}},2070:(t,r,n)=>{var e=n(6387);t.exports=e({}.isPrototypeOf)},9195:(t,r,n)=>{var e=n(3661),o=n(4972),i=n(6654);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,r=!1,n={};try{(t=e(Object.prototype,"__proto__","set"))(n,[]),r=n instanceof Array}catch(t){}return function(n,e){return o(n),i(e),r?t(n,e):n.__proto__=e,n}}():void 0)},4047:(t,r,n)=>{var e=n(5023),o=n(7907),i=n(4388),a=TypeError;t.exports=function(t,r){var n,s;if("string"===r&&o(n=t.toString)&&!i(s=e(n,t)))return s;if(o(n=t.valueOf)&&!i(s=e(n,t)))return s;if("string"!==r&&o(n=t.toString)&&!i(s=e(n,t)))return s;throw a("Can\'t convert object to primitive value")}},1861:(t,r,n)=>{var e=n(2281),o=TypeError;t.exports=function(t){if(e(t))throw o("Can\'t call method on "+t);return t}},2491:(t,r,n)=>{var e=n(4736),o=n(9105),i=e("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},35:(t,r,n)=>{var e=n(8770),o=n(9049),i="__core-js_shared__",a=e[i]||o(i,{});t.exports=a},4736:(t,r,n)=>{var e=n(1028),o=n(35);(t.exports=function(t,r){return o[t]||(o[t]=void 0!==r?r:{})})("versions",[]).push({version:"3.29.1",mode:e?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"})},1714:(t,r,n)=>{var e=n(5977),o=n(2687);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&e&&e<41}))},4505:(t,r,n)=>{var e=n(9808),o=TypeError;t.exports=function(t){var r=e(t,"number");if("number"==typeof r)throw o("Can\'t convert number to bigint");return BigInt(r)}},9927:(t,r,n)=>{var e=n(5303);t.exports=function(t){var r=+t;return r!=r||0===r?0:e(r)}},2558:(t,r,n)=>{var e=n(9927),o=Math.min;t.exports=function(t){return t>0?o(e(t),9007199254740991):0}},3396:(t,r,n)=>{var e=n(1861),o=Object;t.exports=function(t){return o(e(t))}},9808:(t,r,n)=>{var e=n(5023),o=n(4388),i=n(6472),a=n(6824),s=n(4047),u=n(9610),c=TypeError,h=u("toPrimitive");t.exports=function(t,r){if(!o(t)||i(t))return t;var n,u=a(t,h);if(u){if(void 0===r&&(r="default"),n=e(u,t,r),!o(n)||i(n))return n;throw c("Can\'t convert object to primitive value")}return void 0===r&&(r="number"),s(t,r)}},7586:(t,r,n)=>{var e=n(9808),o=n(6472);t.exports=function(t){var r=e(t,"string");return o(r)?r:r+""}},2594:(t,r,n)=>{var e={};e[n(9610)("toStringTag")]="z",t.exports="[object z]"===String(e)},8599:t=>{var r=String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},9105:(t,r,n)=>{var e=n(6387),o=0,i=Math.random(),a=e(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},2839:(t,r,n)=>{var e=n(1714);t.exports=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3609:(t,r,n)=>{var e=n(6840),o=n(2687);t.exports=e&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},6891:(t,r,n)=>{var e=n(8770),o=n(7907),i=e.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},9610:(t,r,n)=>{var e=n(8770),o=n(4736),i=n(6232),a=n(9105),s=n(1714),u=n(2839),c=e.Symbol,h=o("wks"),f=u?c.for||c:c&&c.withoutSetter||a;t.exports=function(t){return i(h,t)||(h[t]=s&&i(c,t)?c[t]:f("Symbol."+t)),h[t]}},2634:(t,r,n)=>{"use strict";var e=n(5833),o=n(1615),i=o.aTypedArray,a=o.exportTypedArrayMethod,s=o.getTypedArrayConstructor;a("toReversed",(function(){return e(i(this),s(this))}))},5323:(t,r,n)=>{"use strict";var e=n(1615),o=n(6387),i=n(1452),a=n(2166),s=e.aTypedArray,u=e.getTypedArrayConstructor,c=e.exportTypedArrayMethod,h=o(e.TypedArrayPrototype.sort);c("toSorted",(function(t){void 0!==t&&i(t);var r=s(this),n=a(u(r),r);return h(n,t)}))},8507:(t,r,n)=>{"use strict";var e=n(9159),o=n(1615),i=n(3594),a=n(9927),s=n(4505),u=o.aTypedArray,c=o.getTypedArrayConstructor,h=o.exportTypedArrayMethod,f=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();h("with",{with:function(t,r){var n=u(this),o=a(t),h=i(n)?s(r):+r;return e(n,c(n),o,h)}}.with,!f)},8451:(t,r,n)=>{n(2634)},2187:(t,r,n)=>{n(5323)},6586:(t,r,n)=>{n(8507)}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";n(8451),n(2187),n(6586);let t;function r(t,r,n=1e-6){return Math.abs(t-r)<n}function e(t){return t.toString(16).padStart(2,"0")}function o(t){return`${parseFloat((100*t).toFixed(1))}%`}function i(t){t=t.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i,(function(t,r,n,e){return r+r+n+n+e+e}));const r=/^#?(?<r>[a-f\\d]{2})(?<g>[a-f\\d]{2})(?<b>[a-f\\d]{2})(?<a>[a-f\\d]{2})?$/i.exec(t),n=r?.groups?.r,e=r?.groups?.g,o=r?.groups?.b,i=r?.groups?.a;if(void 0===n||void 0===e||void 0===o)throw new Error(`Invalid hex color code "${t}"`);return{r:n,g:e,b:o,a:i}}function a(t){const{a:r}=i(t);if(!r)return 1;return function(t,r,n){const e=t.toLocaleString("en",{useGrouping:!1,minimumFractionDigits:r,maximumFractionDigits:n});return Number(e)}(parseInt(r,16)/255,0,2)}!function(t){t[t.HEX=0]="HEX",t[t.HEXA=1]="HEXA",t[t.RGB=2]="RGB",t[t.RGBA=3]="RGBA",t[t.HSL=4]="HSL",t[t.HSLA=5]="HSLA"}(t||(t={}));const s=.07,u=.02;function c(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function h({rgb:{r:t,g:r,b:n}}){return.2126*c(t/255)+.7152*c(r/255)+.0722*c(n/255)}function f(t,r){const n=h(t),e=h(r);return(Math.max(n,e)+.05)/(Math.min(n,e)+.05)}class l{constructor(t,r,n,e=1){this.rgb=t,this.hsl=r,this.hsv=n,this.a=e}static BLACK=l.fromRGB({r:0,g:0,b:0});static WHITE=l.fromRGB({r:255,g:255,b:255});static fromRGB(t,n){if(t.r<0||t.g<0||t.b<0||t.r>255||t.g>255||t.b>255||n&&n<0||n&&n>1)throw Error(`Invalid RGB color: ${JSON.stringify(t)}, alpha: ${n}`);const e=function({r:t,g:n,b:e}){const o=t/255,i=n/255,a=e/255,s=Math.max(o,i,a),u=Math.min(o,i,a),c=s-u;let h;const f=(s+u)/2,l=s;h=r(c,0)?0:r(l,o)?60*(0+(i-a)/c):r(l,i)?60*(2+(a-o)/c):60*(4+(o-i)/c),h%=360,h<0&&(h+=360);const p=0===f||1===f?0:(l-f)/Math.min(f,1-f);return{h:Math.round(h),s:p,l:f}}(t),o=function({r:t,g:n,b:e}){const o=t/255,i=n/255,a=e/255,s=Math.max(o,i,a),u=s-Math.min(o,i,a);let c;const h=s;c=r(u,0)?0:r(h,o)?60*(0+(i-a)/u):r(h,i)?60*(2+(a-o)/u):60*(4+(o-i)/u),c%=360,c<0&&(c+=360);const f=0===h?0:u/h;return{h:Math.round(c),s:f,v:h}}(t);return new l(t,e,o,n)}static fromHex(t,r){const n=function(t){const{r,g:n,b:e}=i(t);return{r:parseInt(r,16),g:parseInt(n,16),b:parseInt(e,16)}}(t),e=a(t);return l.fromRGB(n,r??e)}static fromHSV(t,r){const n=function({h:t,s:r,v:n}){const e=n*r,o=t/60,i=e*(1-Math.abs(o%2-1));let a;a=o>=0&&o<=1?[e,i,0]:o>1&&o<=2?[i,e,0]:o>2&&o<=3?[0,e,i]:o>3&&o<=4?[0,i,e]:o>4&&o<=5?[i,0,e]:o>5&&o<=6?[e,0,i]:[0,0,0];const s=n-e;return{r:Math.round(255*(a[0]+s)),g:Math.round(255*(a[1]+s)),b:Math.round(255*(a[2]+s))}}(t);return l.fromRGB(n,r)}static fromHSL(t,r){const n=function({h:t,s:r,l:n}){const e=(1-Math.abs(2*n-1))*r,o=t/60,i=e*(1-Math.abs(o%2-1));let a;a=o>=0&&o<=1?[e,i,0]:o>1&&o<=2?[i,e,0]:o>2&&o<=3?[0,e,i]:o>3&&o<=4?[0,i,e]:o>4&&o<=5?[i,0,e]:o>5&&o<=6?[e,0,i]:[0,0,0];const s=n-e/2;return{r:Math.round(255*(a[0]+s)),g:Math.round(255*(a[1]+s)),b:Math.round(255*(a[2]+s))}}(t);return l.fromRGB(n,r)}static fromCSS(t,r){const n=function(t,r){const n=t.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/);if(n){const[t,e,o,i]=n.slice(1),a=r??parseFloat(i);return l.fromRGB({r:parseInt(t,10),g:parseInt(e,10),b:parseInt(o,10)},Number.isNaN(a)?void 0:a)}return null}(t,r);if(n)return n;const e=function(t,r){const n=t.match(/^#([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i);if(n){const t=n[1];return l.fromHex(t,r)}return null}(t,r);if(e)return e;const o=function(t,r){const n=t.match(/^hsla?\\((\\d+),\\s*(\\d+)%,\\s*(\\d+)%(?:,\\s*(\\d*(?:\\.\\d+)?))?\\)$/);if(n){const[t,e,o,i]=n.slice(1),a=r??parseFloat(i);return l.fromHSL({h:parseInt(t,10),s:parseInt(e,10)/100,l:parseInt(o,10)/100},Number.isNaN(a)?void 0:a)}return null}(t,r);if(o)return o;throw new Error(`Invalid or unsupported CSS color: ${t}`)}toCSS(r){switch(r){case t.HEX:return`#${e((n=this).rgb.r)}${e(n.rgb.g)}${e(n.rgb.b)}`;case t.HEXA:return function(t){return`#${e(t.rgb.r)}${e(t.rgb.g)}${e(t.rgb.b)}${e(Math.floor(255*t.a))}`}(this);case t.RGB:return function(t){return`rgb(${t.rgb.r}, ${t.rgb.g}, ${t.rgb.b})`}(this);case t.RGBA:return function(t){return`rgba(${t.rgb.r}, ${t.rgb.g}, ${t.rgb.b}, ${t.a})`}(this);case t.HSL:return function(t){const{h:r,s:n,l:e}=t.hsl;return`hsl(${r}, ${o(n)}, ${o(e)})`}(this);case t.HSLA:return function(t){const{h:r,s:n,l:e}=t.hsl;return`hsla(${r}, ${o(n)}, ${o(e)}, ${t.a})`}(this);default:throw new Error("Invalid or unsupported CSSColorFormat!")}var n}contrastAdjust(t,r=4.5){let n=l.BLACK;return"light"===t&&(n=l.WHITE),function(t,r,n){if(r!==l.BLACK&&r!==l.WHITE)throw new Error("Only supports contrast calculation between black and white.");let e=f(t,r);if(e>=n)return t;let o=t.hsv.v,i=r===l.WHITE?-1*u:u,a=Number.MAX_VALUE,c=null;for(let r=0;r<100&&a>s&&o>=0&&o<=1;r++){o=Math.min(o+i,1),c=l.fromHSV({h:t.hsv.h,s:t.hsl.s,v:o}),e=f(c,l.WHITE);const r=Math.round(10*Math.abs(e-n))/10;r>a&&(i*=-.5),a=r}return null===c?t:c}(this,n,r)}toString(){return`${this.rgb.r},${this.rgb.g},${this.rgb.b},${this.a}`}stringify(){return JSON.stringify(this)}static parse(t){const{rgb:r,hsl:n,hsv:e,a:o}=JSON.parse(t);return new l(r,n,e,o)}}class p{constructor(t,r){this.color=t,this.population=r}static fromColor(t,r){return new p(t,r)}static fromRGB(t,r){return new p(l.fromRGB(t),r)}}class g{constructor(t,r=[]){this._comparator=t,this._data=r}swap(t,r){[this._data[t],this._data[r]]=[this._data[r],this._data[t]]}compare(t,r){return this._comparator(this._data[t],this._data[r])}bubbleUp(t){for(;t>0;){const r=t-1>>>1;if(this.compare(t,r)>=0)break;this.swap(t,r),t=r}}bubbleDown(t){const r=this._data.length;for(;;){const n=1+(t<<1),e=n+1;let o=t;if(n<r&&this.compare(n,o)<=0&&(o=n),e<r&&this.compare(e,o)<0&&(o=e),o===t)break;this.swap(o,t),t=o}}size(){return this._data.length}push(t){this._data.push(t),this.bubbleUp(this._data.length-1)}pop(){if(0===this._data.length)return null;this.swap(0,this._data.length-1);const t=this._data.pop();return this.bubbleDown(0),t}clone(){return new g(this._comparator,[...this._data])}*popAll(){for(;this._data.length>0;)yield this.pop()}}const b=31,v=3;function y(t){const r=(t>>>10&31)<<3,n=(t>>>5&31)<<3,e=(t>>>0&31)<<3;return l.fromRGB({r,g:n,b:e})}function d(t,r){return Math.round((t>>>v)/r)<<v}function m({rgb:{r:t,g:r,b:n}},{rgb:{r:e,g:o,b:i}}){return t*b*b+r*b+n-(e*b*b+o*b+i)}function w({rgb:{r:t,g:r,b:n}},{rgb:{r:e,g:o,b:i}}){return r*b*b+t*b+n-(o*b*b+e*b+i)}function x({rgb:{r:t,g:r,b:n}},{rgb:{r:e,g:o,b:i}}){return n*b*b+r*b+t-(i*b*b+o*b+e)}class _{constructor(t,r){this.min=t,this.max=r}size(){return this.max-this.min+1}clampTo(t){this.min=this.max=t}extendTo(t){this.min=Math.min(this.min,t),this.max=Math.max(this.max,t)}}class A{_population=0;_spanR=new _(0,0);_spanG=new _(0,0);_spanB=new _(0,0);constructor(t){this._swatches=t,this.fitBox()}getVolume(){return this._spanR.size()*this._spanG.size()*this._spanB.size()}getColorCount(){return this._swatches.length}getAverageColor(){let t=0,r=0,n=0,e=0;for(const{color:o,population:i}of this._swatches)e+=i,t+=i*o.rgb.r,r+=i*o.rgb.g,n+=i*o.rgb.b;const o=d(t,e),i=d(r,e),a=d(n,e);return p.fromRGB({r:o,g:i,b:a},e)}canSplit(){return this.getColorCount()>1}split(){if(!this.canSplit())throw new Error("Can not split a box with only 1 color");const t=this.findSplitPoint(),r=new A(this._swatches.slice(t+1,this._swatches.length));return this._swatches.splice(t+1),this.fitBox(),r}fitBox(){this._population=0;for(let t=0;t<this._swatches.length;t++){const{color:r,population:n}=this._swatches[t];this._population+=n,0===t?(this._spanR.clampTo(r.rgb.r),this._spanG.clampTo(r.rgb.g),this._spanB.clampTo(r.rgb.b)):(this._spanR.extendTo(r.rgb.r),this._spanG.extendTo(r.rgb.g),this._spanB.extendTo(r.rgb.b))}}findSplitPoint(){const t=this.getLongestDimensionComparator();this._swatches.sort(((r,n)=>t(r.color,n.color)));const r=Math.floor(this._population/2);for(let t=0,n=0;t<this._swatches.length;t++)if(n+=this._swatches[t].population,n>=r)return Math.min(this._swatches.length-1,t);return 0}getLongestDimensionComparator(){const t=this._spanR.size(),r=this._spanG.size(),n=this._spanB.size();return t>=r&&t>=n?m:r>=t&&r>=n?w:x}}class S{queue=new g(((t,r)=>r.getVolume()-t.getVolume()));_swatches=[];constructor(t){this._options=t}static fromPixels(t,r){return new S(r).quantize(t)}quantize(t){const r=new Array(32768).fill(0);let n=0,e=0,o=0;for(let e=t.next();!e.done;e=t.next()){n++;r[((i=e.value)>>>0&255)>>3<<10|(i>>>8&255)>>3<<5|(i>>>16&255)>>3]++}var i;for(let t=0;t<r.length;t++){const n=r[t];if(0===n)continue;const i=y(t);(void 0===this._options.filter||this._options.filter(i))&&(e++,o+=i.hsv.s,this._swatches.push(p.fromColor(i,n)))}return this._swatches.length>this._options.maxColors&&(this._swatches=this.quantizePixels(this._options.maxColors)),{swatches:this._swatches,totalPixels:n,totalColors:e,totalSaturationFromHSV:o}}quantizePixels(t){this.queue.push(new A(this._swatches)),this.splitBoxes(t);const r=Array.from(this.queue.popAll()).map((t=>t.getAverageColor())),n=this._options.filter;return void 0!==n?r.filter((t=>n(t.color))):r}splitBoxes(t){for(;this.queue.size()<t;){const t=this.queue.pop();if(null===t||!t.canSplit())return;this.queue.push(t.split()),this.queue.push(t)}}}function M(t,r){return t.reduce(((t,n)=>null!==t&&r(t)>r(n)?t:n),null)}const T=30,R=80,I=2,E=.0016,O=.3,B=.1,j=45,C=.4,P=.6,$=.1,G=.02;function F(t,r,n){return(t-r)/(n-r)}function H(t){return(t%=360)<0?360+t:t}function L(t,r){const n=function(t){let r=Number.MAX_VALUE;for(const n of t)r=Math.min(r,n);r=-1*Math.abs(r);let n=0,e=360;for(const o of t){const t=H(o+r);t<180&&t>n&&(n=t),t>=180&&t<e&&(e=t)}return n=H(n-r),e=H(e-r),{hue1:Math.min(n,e),hue2:Math.max(n,e)}}(t);let e=0;return r>=n.hue1&&r<=n.hue2?F(H(r),n.hue1,n.hue2):(e=360-n.hue2,F(H(r+e),0,H(n.hue1+e)))}function D(t,r){const n=t.map((t=>t.color.hsv.h)),e=function(t){let r=0,n=0;for(const e of t)r+=Math.cos(e/180*Math.PI),n+=Math.sin(e/180*Math.PI);const e=r/t.length,o=n/t.length,i=180*Math.atan2(o,e)/Math.PI%360;return i>=0?i:360-Math.abs(i)}(n),o=L(n,e);return o>C||o<P?t.filter((t=>{return t.population/r>G||(n=t.color.hsv.h,o=e,i=j,Math.min(Math.abs(o-n),360-Math.abs(o-n))<i);var n,o,i})):t}function z({color:{hsv:t},population:r},n,e){return(n?1:function(t){const r=function(t,r,n){const e=(n-r)/2+r-r,o=t-r,i=(e-Math.abs(e-o))/e;return Math.max(0,Math.min(i,1))}(t,T,R);return-1*Math.abs(r*I)}(t.h))+r/e+t.s*t.v}function k(t,r,n,e){const o=e/n;if(o<B)return null;const i=t.filter((t=>t.population/r>=E)).filter((t=>!(o>=B+$)||function({hsv:t}){return(t.v>.85||t.v<.15)&&t.s<.2||t.v<.15||t.s<.2||t.s<.2&&t.v<.4?0:(t.v+t.s)/2}(t.color)>=O));if(0===i.length)return null;const a=D(i,r),s=function(t){return t.map((t=>t.color.hsv.h)).every((t=>t>=T&&t<=R))}(a);return M(a,(t=>z(t,s,r)))}const U={min:.3,target:.5,max:.7},N={min:0,target:.26,max:.45},V={min:.55,target:.74,max:1},q={min:.35,target:1,max:1},W={min:0,target:.3,max:.4},X={saturation:.24,luminance:.52,population:.24},Y={vibrantLight:{lightness:V,saturation:q,weights:X},vibrant:{lightness:U,saturation:q,weights:X},vibrantDark:{lightness:N,saturation:q,weights:X},mutedLight:{lightness:V,saturation:W,weights:X},muted:{lightness:U,saturation:W,weights:X},mutedDark:{lightness:N,saturation:W,weights:X}},J=p.fromRGB({r:83,g:83,b:83},1),K=p.fromRGB({r:83,g:83,b:83},1),Q=p.fromRGB({r:127,g:127,b:127},1);function Z(t,r){const{color:{hsl:n}}=t;return n.s>=r.saturation.min&&n.s<=r.saturation.max&&n.l>=r.lightness.min&&n.l<=r.lightness.max}function tt(t,r,n){const{color:{hsl:e}}=t;let o=0,i=0,a=0;return r.weights.saturation>0&&(o=r.weights.saturation*(1-Math.abs(e.s-r.saturation.target))),r.weights.luminance>0&&(i=r.weights.luminance*(1-Math.abs(e.l-r.lightness.target))),r.weights.population>0&&(a=r.weights.population*(t.population/n)),o+i+a}let rt;!function(t){t[t.ARRAY_BUFFER=0]="ARRAY_BUFFER",t[t.IMAGE_BITMAP=1]="IMAGE_BITMAP"}(rt||(rt={}));const nt=self;const et=.05,ot=.95,it=.2;const at=t=>!function({hsl:t}){return t.l<=et}(t)&&!function({hsl:t}){return t.l>=ot}(t)&&!function({hsl:t}){return t.h>=10&&t.h<=37&&t.s<=.82}(t)&&function({hsv:t}){return t.v>it}(t);nt.addEventListener("message",(t=>{const[r,n]=t.data,e=function(t){if(t.source===rt.IMAGE_BITMAP){const r=t.data,n=new OffscreenCanvas(r.width,r.height).getContext("2d");return n.drawImage(r,0,0,r.width,r.height),n.getImageData(0,0,r.width,r.height).data.buffer}return t.data}(n),o=function*(t,r){const n=new Uint32Array(t),e=Math.ceil(n.length/r);for(let t=0;t<n.length;t+=e)yield n[t]}(e,2e4),i=S.fromPixels(o,{maxColors:16,filter:at}),{visRefSwatch:a,visRefDarkSwatch:s,visRefLightSwatch:u}=function(t,r,n,e,o=Y){const i=new Set,a=M(t,(t=>t.population)),s={};for(const[r,n]of Object.entries(o)){const e=M(t.filter((t=>!i.has(t.color.toString()))).filter((t=>Z(t,n))),(t=>tt(t,n,a?.population||1)));null!==e&&(s[r]=e,i.add(e.color.toString()))}const u=k(Object.values(s),r,n,e),c=u?p.fromColor(u.color.contrastAdjust("dark"),1):null,h=u?p.fromColor(u.color.contrastAdjust("light"),1):null;return{dominantSwatch:a,visRefSwatch:u||J,visRefDarkSwatch:c||K,visRefLightSwatch:h||Q,visRefIsFallback:null===u,targetSwatches:s}}(i.swatches,i.totalPixels,i.totalColors,i.totalSaturationFromHSV);nt.postMessage([r,{colorRawJson:a.color.stringify(),colorLightJson:u.color.stringify(),colorDarkJson:s.color.stringify()}])}))})()})();\n',"Worker",void 0,void 0)};let h=0;async function f(t){const r=h++,n=new Promise(((t,n)=>{c.addEventListener("message",(n=>{const[o,i]=n.data;o===r&&t({colorRaw:e.Il.parse(i.colorRawJson),colorDark:e.Il.parse(i.colorDarkJson),colorLight:e.Il.parse(i.colorLightJson)})})),c.addEventListener("error",n)}));return c.postMessage([r,t],[t.data]),await n}async function l(t){let r;try{r=await async function(t){const r=new Image;return r.crossOrigin="anonymous",function(t){const r=0===t.indexOf("spotify:image:"),n=0===t.indexOf("spotify:mosaic:"),e=0===t.indexOf("spotify:localfileimage:");return r||n||e}(t)?r.src=`${o}?uri=${encodeURIComponent(t)}`:r.src=t,await r.decode(),r}(t)}catch(t){return Promise.resolve(u.ab)}const n=r.naturalWidth,e=r.naturalHeight;if("createImageBitmap"in window&&"OffscreenCanvas"in window){const t=await window.createImageBitmap(r);return await async function(t){return await f({source:i.IMAGE_BITMAP,data:t})}(t)}const a=document.createElement("canvas"),s=a.getContext("2d");return a.width=n,a.height=e,s.drawImage(r,0,0,n,e),await async function(t){return await f({source:i.ARRAY_BUFFER,data:t.data.buffer})}(s.getImageData(0,0,n,e))}}}]);
//# sourceMappingURL=9331.js.map