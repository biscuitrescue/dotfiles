"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[6450],{5180:(e,n,t)=>{t.r(n),t.d(n,{DISALLOWED_VIEWS:()=>z,View:()=>B,default:()=>J});var s=t(59496),r=t(84875),a=t.n(r),i=t(90641),o=t(27442),l=t(60378),c=t(56916),u=t(70357),d=t(82807),m=t(10118),g=t(19193),h=t(77741),x=t(3835),f=t(62256),v=t(37611),p=t(26553),j=t(65476),b=t(37277),y=t(56760),w=t(85220),k=t(78061),N=t(65748),A=t(69062),I=t(78241),P=t(9719);const D="EPMDgp7znILo0hvyirzv",C="noUm6pjQ6KWq7mVxYDor",E="PqnKjxzJ1Zvr9qKRlRbO",L="uuBQS9Ym_VPmAQrLhPQb";var M=t(4637);const F=e=>(0,A.W6)(I.sE)?(0,M.jsxs)(P.default,{to:e.uri,target:"_blank",className:D,children:[(0,M.jsx)("div",{className:C}),(0,M.jsx)(N.D,{className:E,as:"h2",variant:"alto",children:e.label}),(0,M.jsx)(N.D,{className:L,as:"p",variant:"mesto",children:e.tagline})]}):null,q=e=>(0,M.jsx)(s.Suspense,{fallback:null,children:(0,M.jsx)(F,{...e})}),W=e=>e.id?.startsWith("scc-corona"),R=({spaces:e,viewName:n,viewId:t,isAnonymous:r})=>{const a=(0,s.useCallback)(((e,n)=>{const s=((e,n)=>{let{uri:t}=e;return e.href.includes("https://api.spotify.com/v1/views/")&&(t=e.href.replace("https://api.spotify.com/v1/views/","spotify:genre:"),"hub-browse-grid"===n&&(t=t.replace(":view:",":genre:"))),t})(e,t);return(0,M.jsx)(y.q,{index:n,entity:{...e,uri:s}},e.href)}),[t]),i=(0,s.useCallback)(((e,n)=>(0,M.jsx)(k.JL,{value:"card",index:n,children:(0,M.jsx)(y.q,{index:n,entity:e})},e.uri||n)),[]),o=(0,s.useCallback)(((e,n)=>"link"===e.type?a(e,n):i(e,n)),[i,a]),l=(0,s.useCallback)((e=>!!W(e)||!((e=>"HEADER"===e.rendering)(e)||0===e.content.total||r&&"uniquely-yours-shelf"===e.id)),[r]);return e&&0!==e.length?e[0].content?(0,M.jsx)(M.Fragment,{children:e.filter(l).map(((e,n)=>{const s=e.content&&(0,x.p)((0,x.S)(e.href));if(W(e)){const n=e.content.items[0];return n&&n.name&&n.description&&n.href?(0,M.jsx)(q,{label:n.name,tagline:n.description,uri:n.href},"corona-banner"):null}return(0,M.jsx)(k.JL,{value:"headered-grid",index:n,children:(0,M.jsx)(w.q,{total:e.content.total,seeAllUri:s,pageId:t,title:e.name,tagline:e.tag_line||void 0,index:n,id:e.id,children:e.content.items.map(o)})},e.id)}))}):(0,M.jsx)(k.JL,{value:"headered-grid",children:(0,M.jsx)(w.q,{showAll:!0,title:n,total:e?.length||0,index:0,id:t??"spaces-see-all-grid",children:e?.map(o)})}):null};var S=t(35841);const _="XD65NhAD6ebYxMaW9cZZ",G="AJqEY1gblQDvIgjU0jAH",Q="Ft1cMGlqDsCbqmXQyeKN",U="zlBEnsMyvUhuHSEtst4Q",V="INYpiFRlwWIZ0vH30xW2",T=e=>"HEADER"===e.rendering,H=(e,n=[],t)=>{if(!e)return(0,M.jsx)("div",{className:V});const s=n.filter((e=>"background"===e.name));return(0,M.jsxs)(v.gF,{backgroundImages:s,backgroundColor:t,size:0===s.length?v.fR.SMALL:v.fR.DEFAULT,children:[(0,M.jsx)(p.W,{children:(0,M.jsx)(j.i,{text:e})}),(0,M.jsx)(v.sP,{children:(0,M.jsx)(v.xd,{children:e})})]})},Y=e=>{const{title:n,images:t,backgroundColor:s}=e;return(0,M.jsx)(M.Fragment,{children:H(n,t,s)})},z=["ginger-genre-affinity"],B=s.memo((function({viewData:e,viewId:n,backgroundColor:t,isFullyLoaded:r,isGenre:i,isAnonymous:d,getNextPage:x}){const p=e?.name,{spec:j,UBIFragment:y}=(0,h.fU)(o.createDesktopGenreEventFactory,{data:{identifier:n,uri:`spotify:genre:${n}`}}),w=(0,s.useCallback)((()=>z.some((n=>e?.href?.includes(n)))),[e]),k=(0,s.useCallback)((()=>{if(!e)return;const n=w();r||n||x()}),[e,w,r,x]),N=(0,s.useMemo)((()=>{const{content:{items:n=[]}={}}=e||{},t=n.filter(T);return t.length>0?t[0]:null}),[e]),A=(0,s.useMemo)((()=>{const{name:n}=e||{};return N?N.name:t&&n}),[t,N,e]),I=(0,s.useMemo)((()=>i||Boolean(A)),[i,A]),P=(0,s.useMemo)((()=>!(!e||!Array.isArray(e.content.items))&&I),[I,e]),D=(0,v.oX)(n)?(0,M.jsx)(v.YD,{isAnonymous:d}):(0,M.jsx)(Y,{title:N?.name||A,images:N?.images||[],backgroundColor:t}),C=e?.content.items,E=(0,s.useMemo)((()=>j.shelvesFactory()),[j]);return e?(0,M.jsxs)(M.Fragment,{children:[p?(0,M.jsx)(f.$,{children:(0,g.cT)({genreName:p})}):null,(0,M.jsx)(m.C,{onReachBottom:k,children:(0,M.jsxs)("section",{className:_,children:[P&&(0,M.jsx)(u.H,{color:t||null}),I?D:(0,M.jsx)("div",{className:V}),(0,M.jsxs)("div",{className:Q,children:[I&&D&&(0,M.jsx)(c.I,{backgroundColor:t}),(0,M.jsx)("div",{className:a()(G,"contentSpacing",{[U]:i}),children:(0,M.jsx)(y,{spec:E,children:(0,M.jsx)(R,{spaces:C,viewName:e.name,viewId:n,isAnonymous:d})})})]})]})})]}):(0,M.jsx)(b.h,{hasError:!1,errorMessage:l.ag.get("error.not_found.title.page")})})),J=s.memo((function({viewId:e}){const{isAnonymous:n}=(0,i.v9)(S.Gg),{view:t,getNextPage:s}=(0,d.P)(e),r=!t||null===t.content.next,a=e.endsWith("-page")?e:`${e}-page`,o=(0,i.v9)((e=>e.browse.allItemsStyle?.[a]?.color||"")),l=n=>n.viewId===e||"href"in n&&n.href===(0,x.p)(e),c=(0,i.v9)((e=>e?.browse?.browseAll?.items.some(l)||e?.browse?.topGenres?.items.some(l)||!!o));return(0,M.jsx)(B,{viewData:t,isFullyLoaded:r,viewId:e,backgroundColor:o,isGenre:c,isAnonymous:n,getNextPage:s})}))},82807:(e,n,t)=>{t.d(n,{P:()=>g});var s=t(59496),r=t(75387),a=t(72254),i=t(96186),o=t(90641),l=t(69062),c=t(60378),u=t(14040),d=t(35841),m=t(82220);const g=(e,n)=>{const t=(()=>{const e=(0,l.W6)(m.Xf),n=(0,o.v9)(u.rZ),{overrides:t}=(0,o.v9)(d.Gg),r=c.ag.getLocale(),a=t?.country||n,i=t?.locale||r;return(0,s.useMemo)((()=>{const n=["album","playlist","artist","show","station","episode","merch","artist_concerts"];return e&&n.push("uri_link"),{country:a,locale:i,types:n.join(",")}}),[a,e,i])})(),{data:g,fetchNextPage:h}=(0,r.useInfiniteQuery)(["useView",e,t],(async({pageParam:n})=>void 0===n?async function(e,n){const{body:t}=await i.kO.getView(a.b.getInstance(),e,n);return t}(e,t):async function(e){const n=new URL(e),t=n.origin,s=n.pathname,r=Object.fromEntries(n.searchParams.entries()),{body:o}=await i.TV.getGeneric(a.b.getInstance(),t,s,r,"/useView/fetchNext/{next}");return o}(n)),{cacheTime:n?.cacheTime??18e5,staleTime:n?.staleTime??3e5,getNextPageParam:e=>e.content.next??void 0,getPreviousPageParam:e=>e.content.previous??void 0});return{view:(0,s.useMemo)((()=>g?.pages.reduce(((e,n)=>({...e,content:{...e.content,href:n.content.href,next:n.content.next,offset:n.content.offset,previous:n.content.previous,total:n.content.total,items:e.content.items.concat(n.content.items)}})))),[g?.pages]),getNextPage:h}}}}]);
//# sourceMappingURL=xpui-routes-view.js.map