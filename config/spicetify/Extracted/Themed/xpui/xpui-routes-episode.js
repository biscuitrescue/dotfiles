"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3472],{99922:(e,t,a)=>{a.d(t,{o:()=>n});var i=a(87577),s=a(49207);function n(){return{version:(0,i.W6)(s.GE)?2:1}}},40771:(e,t,a)=>{a.d(t,{Z:()=>n});var i=a(67892),s=a(85893);const n=({href:e,children:t,...a})=>(0,s.jsx)(i.Z,{to:e,...a,children:t})},43683:(e,t,a)=>{a.d(t,{q:()=>v,o:()=>T});var i=a(67294),s=a(94184),n=a.n(s),r=a(59440),o=a(97081),l=a(96206),c=a(51674),d=a(79896),u=a(26482),p=a(21663),m=a(88387),g=a(75012),h=a(40080),x=a(14130);const y="l_MW0G9qeeCKlVJwBykT",b="x-downloadButton-DownloadButton",k="x-downloadButton-button",j="_APVWqivXc4YqgsnpFkP",f="VmwiDoU6RpqyzK_n7XRO",P="rEx3EYgBzS8SoY7dmC6x";var C=a(85893);let v;!function(e){e[e.xs=16]="xs",e[e.sm=24]="sm",e[e.md=32]="md"}(v||(v={}));const N=e=>{const{currentTarget:t,detail:a}=e;a>0&&t&&t.blur()},T=({uri:e,isFollowing:t,canDownload:a=!0,onFollow:s,size:T=v.sm,className:S,onClick:I=(()=>{}),showUpsell:U=!0})=>{const E={"--size":`${T}px`},[w,D]=(0,i.useState)(!1),{capability:M,availability:A,addDownload:L,removeDownload:R}=(0,p._)(e),O=(0,m.A)(e);((e,t)=>{const a=(0,x.r)(),s=(0,i.useRef)(!1);(0,i.useEffect)((()=>{e===u.Om.DOWNLOADING&&!1===s.current&&(s.current=!0,a.say(l.ag.get("download.downloading",t.totalItems)))}),[a,e,t]);const n=(0,h.D)(e);(0,i.useEffect)((()=>{n===u.Om.DOWNLOADING&&e===u.Om.YES&&(s.current=!1,a.say(l.ag.get("download.complete")))}),[a,n,e])})(A,O);const B=(0,i.useCallback)((e=>{e.preventDefault(),M===u.PQ.NO_PERMISSION?I(e,u.mc.NO_PERMISSION):(!1===t?(s(),D(!0)):L(),I(e,u.mc.ADD)),N(e)}),[L,M,t,I,s]),F=(0,i.useCallback)((e=>{e.preventDefault(),R(),N(e),I(e,u.mc.REMOVE)}),[R,I]);(0,i.useEffect)((()=>{!0===w&&!0===t&&(L(),D(!1))}),[t,w,L]);const _=A===u.Om.YES;return M===u.PQ.NO_CAPABILITY||M===u.PQ.NO_PERMISSION_HIDE?null:(a||_)&&(M!==u.PQ.NO_PERMISSION||U)?M===u.PQ.NO_PERMISSION?(0,C.jsx)("div",{className:b,children:(0,C.jsx)(d.Nt,{offset:[-2,20],action:"toggle",trigger:"click",content:(0,C.jsx)(d.yv,{children:(0,C.jsx)("span",{children:l.ag.get("download.upsell")})}),renderInline:!1,children:(0,C.jsx)("div",{children:(0,C.jsx)(c._,{label:l.ag.get("download.download"),children:(0,C.jsx)("button",{className:n()(k,S),role:"switch",onClick:B,"aria-label":l.ag.get("download.download"),"aria-checked":!1,children:(0,C.jsx)(r.D,{iconSize:T})})})})})}):_?(0,C.jsx)(c._,{label:l.ag.get("download.remove"),children:(0,C.jsx)("button",{className:n()(k,S,j),role:"switch",onClick:F,"aria-label":l.ag.get("download.remove"),"aria-checked":!0,children:(0,C.jsx)(o.E,{iconSize:T})})}):A===u.Om.NO?(0,C.jsx)(c._,{label:l.ag.get("download.download"),children:(0,C.jsx)("button",{className:n()(k,S),role:"switch",onClick:B,"aria-label":l.ag.get("download.download"),"aria-checked":!1,children:(0,C.jsx)(r.D,{iconSize:T})})}):(0,C.jsxs)("div",{className:n()(f,S),role:"switch","aria-checked":!0,children:[(0,C.jsx)(c._,{label:l.ag.get("download.cancel"),children:(0,C.jsx)("button",{style:E,className:n()(k,y,S),onClick:F,"aria-label":l.ag.get("download.cancel")})}),(0,C.jsx)("span",{style:E,className:n()(P,y),children:(0,C.jsx)(g.e,{"aria-valuetext":l.ag.get("progress.downloading-tracks"),percentage:O.percentage,size:T})})]}):null}},37483:(e,t,a)=>{a.d(t,{p:()=>u,q:()=>l.q});var i=a(67294),s=a(86706),n=a(4383),r=a(67870),o=a(26492),l=a(43683),c=a(85893);const d=i.memo((function({uri:e,size:t=l.q.md,className:a,onClick:d,showUpsell:u}){const[p,m]=(0,n.Z)(e),g=(0,s.I0)(),h=(0,o.o)(),x=(0,i.useCallback)((()=>{h({targetUri:e,intent:p?"remove-from-library":"add-to-library",type:"click"}),m(!p),g(p?(0,r.SS)():(0,r.kK)())}),[h,e,p,m,g]);return(0,c.jsx)(l.o,{className:a,isFollowing:p,onFollow:x,onClick:d,uri:e,size:t,showUpsell:u})})),u=i.memo((function(e){return(0,c.jsx)(d,{...e})}))},22578:(e,t,a)=>{a.d(t,{$:()=>m});var i=a(64593),s=a(96206),n=a(69691),r=a(8341),o=a(89952),l=a(67294),c=a(51615),d=a(24183);var u=a(85893);function p(e){return e.includes("Spotify")?e:`Spotify – ${e}`}const m=({children:e,usePlayingItem:t})=>{let a=p(e);(e=>{const{mainLandmarkRef:t}=(0,d.Oh)(),a=(0,c.k6)(),i=a.location?.state?.preventMoveFocus,s=(0,l.useRef)(a.length<2);s.current=a.length<2,(0,l.useEffect)((()=>{const a=t.current;!i&&!s.current&&a&&e&&(a.setAttribute("aria-label",e),a.focus())}),[e,t,i])})(e);const{isPlaying:m}=(0,n.IK)(),g=(0,r.Y)((e=>e?.item));return g&&(m||t)&&((0,o.G_)(g)?a=[g.name,g.artists.map((e=>e.name)).join(s.ag.getSeparator())].join(" • "):(0,o.iw)(g)?a=[g.name,g.show.name].join(" • "):(0,o.k6)(g)&&(a=p(s.ag.get("ad-formats.advertisement")))),(0,u.jsx)(i.q,{defaultTitle:"Spotify",defer:!1,children:(0,u.jsx)("title",{children:a})})}},23103:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ka});var i=a(67294),s=a(51615),n=a(87577),r=a(97348),o=a(73305),l=a(65953),c=a(96206),d=a(70369),u=a(63567),p=a(6158),m=a(86706),g=a(74257),h=a(77995),x=a(84629),y=a(18270),b=a(48690),k=a(22345),j=a(60289),f=a(59482),P=a(72907),C=a(67892),v=a(62515),N=a(32626),T=a(18261),S=a(57978),I=a(26482),U=a(84242),E=a(8341),w=a(5944),D=a(15852),M=a(7073),A=a(13759),L=a(84788),R=a(60410),O=a(40771),B=a(38894),F=a(51441),_=a(79896),K=a(32667),z=a(86025),W=a(34011),H=a(1447),J=a(9983),Z=a(89948),q=a(42781);const X="u0Jj3wfs4s9tmaXUTK41",Y="NSXGSulVKC8FxHx5f1f3",$="PN1uMk_51r_KQvgJ6sCR",V="N6NnRc_msmFFxUoAfuKQ",G="qaYOSFBanH3vJvosOwsU";var Q=a(85893);const ee=({showUri:e})=>{const t=(0,H.qT)(),a=(0,Z.l)(e,!0).data;if(a?.type!==q.p.AUDIOBOOK)return null;const i=a.price?.finalPrice?.amount,s=a.price?.finalPrice?.currency;return i&&s?(0,Q.jsxs)("div",{className:X,children:[(0,Q.jsx)(K.D,{as:"div",variant:"cello",className:Y,children:c.ag.get("web-player.audiobooks.chapterUpsell.title")}),(0,Q.jsx)(K.D,{as:"div",variant:"mesto",className:$,children:c.ag.get("web-player.audiobooks.chapterUpsell.description")}),(0,Q.jsxs)("div",{className:V,children:[(0,Q.jsx)(z.o,{className:G,buttonSize:"sm",onClick:()=>{t({type:"close"})},children:c.ag.get("action-trigger.button.not-now")}),(0,Q.jsx)(W.D,{buttonSize:"sm",colorSet:"invertedLight",onClick:async()=>{await(0,J.Q)({show_uri:e,currency:s,price:i})},children:c.ag.get("web-player.audiobooks.chapterUpsell.cta")})]})]}):(console.error("Audiobook has no price information."),null)},te=({children:e,enabled:t,showUri:a,renderInline:i=!0})=>t?(0,Q.jsx)(_.Nt,{trigger:"click",action:"toggle",offset:[-2,20],renderInline:i,content:(0,Q.jsx)(_.yv,{children:(0,Q.jsx)(ee,{showUri:a})}),children:e}):(0,Q.jsx)(Q.Fragment,{children:e}),ae=({chapterUri:e,showUri:t,isLocked:a,isPlayDisabled:s,isActive:n,isPlaying:r,togglePlay:o,triggerPlay:l,playButtonPlayLabel:c,playButtonPauseLabel:d,playPositionMs:u,durationMs:p,logger:m,event:g})=>{const h=(0,B.g)(),x=(0,i.useCallback)((t=>{if(a)return void m.logInteraction(g.hitShowPaywall({paywalledItem:e}));let i;n?(i=r?m.logInteraction(g.hitPause({itemToBePaused:e})):m.logInteraction(g.hitResume({itemToBeResumed:e})),o({loggingParams:i})):(i=m.logInteraction(g.hitPlay({itemToBePlayed:e})),l({seekTo:t,loggingParams:i}))}),[a,n,m,g,e,r,o,l]);(0,i.useEffect)((()=>{const e=new URLSearchParams(location.search);if(e.has("t")){const t=e.get("t")||"0",a=1e3*parseInt(t,10);a<=p&&x(a)}}),[p,x]);const y=()=>(0,Q.jsx)(F.JM,{size:F.qE.lg,onClick:()=>{x(u)},isPlaying:r,disabled:s,locked:a,ariaPlayLabel:c,ariaPauseLabel:d});return h?y():(0,Q.jsx)(te,{showUri:t,enabled:a,renderInline:!1,children:y()})};var ie=a(31610);const se="UVWRbDQd2DM0ShkvMq54",ne="Eoy1M3AAKeAUI9cNWsuq",re="rmgkmccGmTBvrw7gXMyS",oe="JKIiOrx9EhZCkyBsu7YI";const le=i.memo((function({chapter:e}){const{name:t,uri:a,playedState:s,contentRating:n,duration:r,playability:o}=e,d=e.book,u=e.coverArt.length?e.coverArt:d.coverArt||[],p=u[0]?.url,B=(0,v.Z)(p||null),F=(0,m.I0)(),[_,K]=(0,i.useState)(s.state===M.sY.Completed),{spec:z,logger:W}=(0,D.fU)(h.createDesktopAudiobookChapterEventFactory,{data:{uri:a}}),{triggerPlay:H,togglePlay:J,isPlaying:Z,isActive:q}=(0,U.n)({uri:a},{featureIdentifier:"chapter"}),X=(0,E.Y)((e=>(0,w.k)(e)??void 0)),Y=(0,R.S)(e),{badges:$}=(0,L.r)({contentRating:n?.label}),V=(0,i.useCallback)((e=>{!o.playable&&$.nineteen&&(e.stopPropagation(),F((0,x.RM)(a||"")))}),[a,o.playable,$.nineteen,F]),G=d.uri,ee=function(e){const t=(0,l.EC)(e);return`/show/${(0,l.HB)(t?.id||"")}`}(G),te=(0,i.useCallback)((()=>{const e=z.headerFactory().audiobookLinkFactory().hitUiNavigate({destination:ee});W.logInteraction(e)}),[W,ee,z]),le=(0,i.useCallback)(((e,t)=>{const i=z.actionBarFactory().downloadButtonFactory();t===I.mc.ADD?W.logInteraction(i.hitDownload({itemToDownload:a})):t===I.mc.REMOVE?W.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:a})):t===I.mc.NO_PERMISSION&&W.logInteraction(i.hitUiReveal())}),[W,z,a]),ce=(0,i.useCallback)((()=>{const e=z.actionBarFactory().contextMenuButtonFactory().hitUiReveal();W.logInteraction(e)}),[W,z]),de=(0,i.useCallback)((()=>{const e=z.allChaptersLinkFactory().hitUiNavigate({destination:ee});W.logInteraction(e)}),[W,ee,z]),ue=!Y&&!o.playable,pe=d.name,me=c.ag.get("tracklist.a11y.play",t,pe),ge=c.ag.get("tracklist.a11y.pause",t,pe);return(0,Q.jsxs)("section",{"data-testid":"chapter",className:se,children:[(0,Q.jsxs)(j.gF,{backgroundColor:B,children:[(0,Q.jsx)(f.W,{children:(0,Q.jsx)(P.i,{text:t})}),(0,Q.jsx)("div",{className:re,children:(0,Q.jsx)(T._,{menu:(0,Q.jsx)(k.r,{uri:a,isPlayed:_,onMarkAsPlayed:K,contextUri:a,isLocked:Y}),children:(0,Q.jsx)(j.Oe,{loading:"eager",name:t,images:u,placeholderType:"episode",shape:j.Kc.ROUNDED_CORNERS})})}),(0,Q.jsxs)(j.sP,{children:[(0,Q.jsx)(j.dy,{small:!0,uppercase:!0,children:c.ag.get("web-player.audiobooks.chapter")}),(0,Q.jsx)(T._,{menu:(0,Q.jsx)(k.r,{uri:a,isPlayed:_,onMarkAsPlayed:K,contextUri:a,isLocked:Y}),children:(0,Q.jsx)(j.xd,{dragUri:a,dragLabel:t,children:(0,Q.jsx)("span",{"data-testid":"chapterTitle",children:t})})}),(0,Q.jsx)(T._,{menu:(0,Q.jsx)(k.r,{uri:a,isPlayed:_,onMarkAsPlayed:K,contextUri:a,isLocked:Y}),children:(0,Q.jsx)(C.Z,{to:ee,onClick:te,children:(0,Q.jsx)(j.dy,{large:!0,bold:!0,children:(0,Q.jsx)("span",{"data-testid":"bookTitle",children:pe})})})})]})]}),(0,Q.jsxs)(y.o,{backgroundColor:B,children:[(0,Q.jsxs)(y.F,{children:[$.nineteen&&(0,Q.jsx)(S.X,{className:ne,size:16}),(0,Q.jsx)(A.E,{size:A.$.LARGE,fullyPlayed:_,durationMs:r.milliseconds,resumePositionMs:s.playPositionMilliseconds,isPlaying:Z,position:q&&X||void 0})]}),(0,Q.jsxs)(y.F,{children:[(0,Q.jsx)("div",{onClick:V,children:(0,Q.jsx)(ae,{chapterUri:a,showUri:G,isLocked:Y,durationMs:r.milliseconds,playPositionMs:s.playPositionMilliseconds,isPlayDisabled:ue,isActive:q,isPlaying:Z,togglePlay:J,triggerPlay:H,playButtonPlayLabel:me,playButtonPauseLabel:ge,logger:W,event:z.actionBarFactory().playButtonFactory()})}),!Y&&(0,Q.jsx)(ie.o,{uri:a,bookUri:G,onClick:le}),!Y&&(0,Q.jsx)(N.yj,{menu:(0,Q.jsx)(k.r,{uri:a,isPlayed:_,onMarkAsPlayed:K,contextUri:a,isLocked:Y}),children:(0,Q.jsx)(b.z,{label:c.ag.get("more.label.context",t),onClick:ce})})]})]}),(0,Q.jsx)("div",{className:"contentSpacing",children:(0,Q.jsx)(g.P,{buttonSize:"sm",href:G,component:O.Z,className:oe,onClick:de,children:c.ag.get("web-player.audiobooks.seeAllChapters")})})]})}));var ce=a(99922),de=a(74849);const ue=(0,i.lazy)((()=>Promise.all([a.e(1814),a.e(214)]).then(a.bind(a,70214))));function pe(e){const t=(0,de.m)(),a=(0,ce.o)();return t?(0,Q.jsx)(i.Suspense,{fallback:!0,children:(0,Q.jsx)(ue,{reason:"Episode page",...a,...e})}):null}const me="dpN5ViPOceUWNB5EQPHN",ge="vBcxPq3E2okwgXOkVPEM",he="HCCBXwdFvq6omWW2hR0N",xe="bJOPO5Zo7dpjSVDwEpSw",ye="TXdDDpokVTyJzDEDWHHf",be="HaSbtEVJnxBsaJ5SRi0M",ke="YldGldlfaI9myEGXQf9g",je="qJHVIpJn1vLPWsAKfTEZ",fe="wSIzjkVlr0Zdy7di2vRm",Pe="hYS_K1NATGyWt6tCSRqQ",Ce="hVVaM4pF9arpQ8Nvn2a1",ve="zf0Eac1LugsHUacz74Zf",Ne="TnNaqxbaI0hzhBQZ7wE0",Te="zSw1lG1TNe_xm6KTqtCv",Se="MlEQDkXnjdKKJueJ9kkB",Ie="jg0xlyD1yjh0DPNG6eOg",Ue="QiHXpFb4dLZNOFe5gpp3";var Ee=a(66249),we=a(49207);const De=({cardHeaderText:e,cardBodyText:t,buttonText:a,buttonTarget:i})=>(0,n.W6)(we.vp)?(0,Q.jsxs)("div",{className:ke,children:[(0,Q.jsxs)("div",{className:je,children:[(0,Q.jsx)(K.D,{variant:"balladBold",semanticColor:"textBase",children:e}),(0,Q.jsx)(K.D,{semanticColor:"textBase",children:t})]}),(0,Q.jsx)(W.D,{buttonSize:"sm",colorSet:"invertedLight",href:(0,l.EC)(i).toURLPath(!0),component:O.Z,children:a})]}):null,Me=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:s,htmlDescription:n,onExpanded:r,onTimeStampClick:o,playability:l,showHeader:d=!0,spec:u})=>{const p=(0,D.$P)(),m=(s||t)&&d,g=(0,i.useCallback)((e=>{const t=u.readMoreButtonFactory();p.logInteraction(e?t.hitUiReveal():t.hitUiHide()),r?.()}),[u,p,r]);return(0,Q.jsxs)(Q.Fragment,{children:[m&&(0,Q.jsx)(K.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:he,children:c.ag.get("episode.description-title")}),t&&(0,Q.jsx)(De,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),s&&(0,Q.jsx)(Ee.o,{className:ge,onTimeStampClick:o,maxLines:4,onExpanded:g,content:(a||"").trim(),htmlContent:e&&n?n:void 0,enableTimestamps:l.playable})]})};var Ae,Le=a(94184),Re=a.n(Le),Oe=a(97650),Be=a(29325),Fe=a(61102),_e=a(3822),Ke=a(13406),ze=a(32648);!function(e){e.DESCRIPTION="description",e.TRANSCRIPT="transcript"}(Ae||(Ae={}));const We=i.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:a,spec:s}){const n=(0,D.$P)(),[r,o]=(0,i.useState)(Ae.DESCRIPTION),{scrollNodeRef:l}=i.useContext(ze.VX),{ref:d,inView:u}=(0,Oe.YD)({threshold:[1],root:l.current,rootMargin:`-${Ke.K1+1}px 100000px 0px 100000px`}),p=(0,i.useRef)(null),m=(0,i.useCallback)((e=>{p.current=e,d(e)}),[d]);return(0,i.useEffect)((()=>{const e=p.current?.parentElement?.offsetTop,t=l?.current;if(!e||!t)return;const a=e-Ke.K1;t.scrollTop>a&&t.scrollTo({top:a})}),[l,r]),(0,Q.jsx)(Be.l,{list:(0,Q.jsxs)(Fe.F,{className:Re()(Se,{[Ie]:!u}),ref:m,children:[(0,Q.jsx)(_e.c,{label:c.ag.get("web-player.episode.description"),sentenceCase:!0,active:r===Ae.DESCRIPTION,onClick:()=>{const e=s.tabsFactory().descriptionTabButtonFactory().hitUiReveal();n.logInteraction(e),o(Ae.DESCRIPTION)},className:Re()(Ue,{[fe]:r===Ae.DESCRIPTION})}),(0,Q.jsx)(_e.c,{label:c.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:r===Ae.TRANSCRIPT,onClick:()=>{const e=s.tabsFactory().transcriptTabButtonFactory().hitUiReveal();n.logInteraction(e),o(Ae.TRANSCRIPT)},className:Re()(Ue,{[fe]:r===Ae.TRANSCRIPT})})]}),children:null===e||r===Ae.DESCRIPTION?t:a})}));var He=a(69518),Je=a.n(He),Ze=a(43914),qe=a(49104);const Xe=(0,i.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:a}){return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)("div",{className:Ce,children:(0,Q.jsx)(K.D,{variant:"viola",semanticColor:"textBase",children:c.ag.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,i)=>{const s=`transcript-section-${i}`;return(0,Q.jsxs)("div",{className:Pe,children:[(0,Q.jsx)("button",{className:ve,onClick:()=>{t(e.startMs,s)},children:(0,Q.jsx)(Ze.D,{id:s,targetURI:Je().from(a),fadeOut:!0,children:(0,Q.jsx)(K.D,{variant:"finaleBold",semanticColor:"textSubdued",className:Ne,children:(0,qe.m)(e.startMs)})})}),e.content.map(((e,t)=>(0,Q.jsx)(K.D,{variant:"viola",semanticColor:"textBase",className:Te,dir:"auto",children:e},`transcript-text-${t}`)))]},s)}))]})}));a(57658);var Ye=a(74600),$e=a(13153),Ve=a(86543),Ge=a(38470),Qe=a(1848),et=a(88214),tt=a(21509),at=a(82760),it=a(86064),st=a(42922);const nt="OYehkMWcGJRKPkByp46K",rt="uc1bXkrZqrCz0CMK4lBb",ot="qZeibBbA3SVClzEueYND",lt=({episodeUri:e,index:t,duration:a,start:s,stop:n,name:r,uri:o,artists:l,album:d,playable:u})=>{const{isActive:p,isPlaying:m,onClick:g}=(0,it.k)({episodeUri:e,start:s,stop:n}),h=(0,i.useCallback)(((e,t)=>{g(t)}),[g]),{spec:x}=(0,D.fU)(Qe.createDesktopTrackListRowEventFactory,{data:{position:t,reason:"",uri:o}});return(0,Q.jsx)(st.ZP,{value:"row",index:t,children:(0,Q.jsx)(N.xV,{trigger:"right-click",action:"open",menu:(0,Q.jsx)(et.$,{uri:o}),children:(0,Q.jsxs)(at.c,{uri:o,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:l?.[0].name??""},onTriggerPlay:h,isActive:p,isPlayable:u,spec:x,children:[(0,Q.jsxs)(tt.vZ,{ariaColIndex:0,children:[(0,Q.jsx)(tt.Du,{uri:o,playAriaLabel:c.ag.get("tracklist.a11y.play",r,l?.[0].name),onClick:h,isPlaying:m,isActive:p,spec:x,children:(0,Q.jsx)(tt.km,{children:(0,Q.jsx)("img",{className:rt,src:d.image,alt:d.name})})}),(0,Q.jsxs)(tt.vm,{children:[(0,Q.jsx)(tt.Wh,{titleText:r,children:r}),(0,Q.jsx)(tt.K9,{children:(0,Q.jsx)(tt.T6,{artists:l,spec:x})})]})]}),(0,Q.jsx)(tt.UA,{ariaColIndex:1,children:(0,Q.jsx)(tt.BM,{uri:d.uri,name:d.name,spec:x,children:d.name})}),(0,Q.jsxs)(tt.mU,{ariaColIndex:2,children:[(0,Q.jsx)(tt.qS,{uri:o,spec:x}),(0,Q.jsx)(tt.A$,{duration:a}),(0,Q.jsx)(tt.Zv,{spec:x,menu:(0,Q.jsx)(et.$,{uri:o,artists:l}),label:c.ag.get("more.label.track",r,l?.[0].name)})]})]})})})};function ct(e,t,a){return e.reduce(((e,i,s)=>((s>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===i.type?e.push(function(e,t,a){return{type:"MUSIC",index:t,uri:a.uri,episodeUri:e,start:a.start,stop:a.stop,duration:a.duration,name:a.track.name,artists:a.track.artists,album:a.track.album,playable:a.track.playable}}(a,s,i)):"TALK"===i.type&&e.push(function(e,t,a){return{type:"TALK",index:t,uri:e,title:a.title,subtitle:a.subtitle,start:a.start,stop:a.stop,duration:a.duration,showUri:a.show.uri,showName:a.show.name}}(a,s,i)),e)),[])}const dt=({uri:e,segmentCount:t})=>{const a=(0,Ve.G)(),s=(0,i.useCallback)((async(i,s)=>{const n=Math.ceil(i/2);try{return{items:ct(await a.getSegments(e,n,s),n,e),totalLength:2*t-1}}catch(e){return{items:[],totalLength:0}}}),[t,a,e]),n=(0,i.useCallback)((t=>{switch(t.type){case"SPACER":return(0,Q.jsx)("div",{className:ot},t.id);case"MUSIC":return(0,Q.jsx)(lt,{...t},`${e}-${t.index}`);case"TALK":return(0,Q.jsx)(Ye.t,{...t},`${e}-${t.index}`);default:return(0,Ge.U)(t)}}),[e]),r=c.ag.get("music_and_talk.in_this_episode");return(0,Q.jsxs)("div",{children:[(0,Q.jsx)(K.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:nt,children:r}),(0,Q.jsx)($e.Pv,{ariaLabel:r,hasHeaderRow:!0,rowPlaceholder:$e.hU,columns:[$e.QD.TITLE,$e.QD.ALBUM_OR_SHOW,$e.QD.DURATION],renderRow:n,fetchTracks:s,resolveUri:e=>"MUSIC"===e.type?e.uri:"",limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"})]})};a(23767),a(8585),a(68696);var ut=a(43720),pt=a.n(ut),mt=a(62100),gt=a.n(mt);let ht;function xt(e){switch(e){case 0:case"UNKNOWN":return ht.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return ht.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return ht.MUSIC_TRACK;default:return ht.UNRECOGNIZED}}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(ht||(ht={}));const yt={encode(e,t=gt().Writer.create()){""!==e.version&&t.uint32(10).string(e.version),""!==e.episodeUri&&t.uint32(18).string(e.episodeUri),""!==e.publishedAt&&t.uint32(26).string(e.publishedAt);for(const a of e.sections)bt.encode(a,t.uint32(34).fork()).ldelim();return""!==e.language&&t.uint32(42).string(e.language),!0===e.curated&&t.uint32(48).bool(e.curated),t},decode(e,t){const a=e instanceof gt().Reader?e:new(gt().Reader)(e);let i=void 0===t?a.len:a.pos+t;const s={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};for(;a.pos<i;){const e=a.uint32();switch(e>>>3){case 1:s.version=a.string();break;case 2:s.episodeUri=a.string();break;case 3:s.publishedAt=a.string();break;case 4:s.sections.push(bt.decode(a,a.uint32()));break;case 5:s.language=a.string();break;case 6:s.curated=a.bool();break;default:a.skipType(7&e)}}return s},fromJSON:e=>({version:ft(e.version)?String(e.version):"",episodeUri:ft(e.episodeUri)?String(e.episodeUri):"",publishedAt:ft(e.publishedAt)?String(e.publishedAt):"",sections:Array.isArray(e?.sections)?e.sections.map((e=>bt.fromJSON(e))):[],language:ft(e.language)?String(e.language):"",curated:!!ft(e.curated)&&Boolean(e.curated)}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),void 0!==e.episodeUri&&(t.episodeUri=e.episodeUri),void 0!==e.publishedAt&&(t.publishedAt=e.publishedAt),e.sections?t.sections=e.sections.map((e=>e?bt.toJSON(e):void 0)):t.sections=[],void 0!==e.language&&(t.language=e.language),void 0!==e.curated&&(t.curated=e.curated),t},fromPartial(e){const t={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};return t.version=e.version??"",t.episodeUri=e.episodeUri??"",t.publishedAt=e.publishedAt??"",t.sections=e.sections?.map((e=>bt.fromPartial(e)))||[],t.language=e.language??"",t.curated=e.curated??!1,t}};const bt={encode:(e,t=gt().Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&kt.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&jt.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&kt.encode(e.fallback,t.uint32(42).fork()).ldelim(),t),decode(e,t){const a=e instanceof gt().Reader?e:new(gt().Reader)(e);let i=void 0===t?a.len:a.pos+t;const s={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};for(;a.pos<i;){const e=a.uint32();switch(e>>>3){case 1:s.type=a.int32();break;case 2:s.startMs=a.int32();break;case 3:s.plaintextContent=kt.decode(a,a.uint32());break;case 6:s.musicTrack=jt.decode(a,a.uint32());break;case 4:s.title=a.string();break;case 5:s.fallback=kt.decode(a,a.uint32());break;default:a.skipType(7&e)}}return s},fromJSON:e=>({type:ft(e.type)?xt(e.type):0,startMs:ft(e.startMs)?Number(e.startMs):0,plaintextContent:ft(e.plaintextContent)?kt.fromJSON(e.plaintextContent):void 0,musicTrack:ft(e.musicTrack)?jt.fromJSON(e.musicTrack):void 0,title:ft(e.title)?String(e.title):"",fallback:ft(e.fallback)?kt.fromJSON(e.fallback):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case ht.UNKNOWN:return"UNKNOWN";case ht.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case ht.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?kt.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?jt.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?kt.toJSON(e.fallback):void 0),t},fromPartial(e){const t={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return t.type=e.type??0,t.startMs=e.startMs??0,t.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?kt.fromPartial(e.plaintextContent):void 0,t.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?jt.fromPartial(e.musicTrack):void 0,t.title=e.title??"",t.fallback=void 0!==e.fallback&&null!==e.fallback?kt.fromPartial(e.fallback):void 0,t}};const kt={encode(e,t=gt().Writer.create()){for(const a of e.plaintext)t.uint32(10).string(a);return t},decode(e,t){const a=e instanceof gt().Reader?e:new(gt().Reader)(e);let i=void 0===t?a.len:a.pos+t;const s={plaintext:[]};for(;a.pos<i;){const e=a.uint32();if(e>>>3==1)s.plaintext.push(a.string());else a.skipType(7&e)}return s},fromJSON:e=>({plaintext:Array.isArray(e?.plaintext)?e.plaintext.map((e=>String(e))):[]}),toJSON(e){const t={};return e.plaintext?t.plaintext=e.plaintext.map((e=>e)):t.plaintext=[],t},fromPartial(e){const t={plaintext:[]};return t.plaintext=e.plaintext?.map((e=>e))||[],t}};const jt={encode:(e,t=gt().Writer.create())=>(""!==e.uri&&t.uint32(10).string(e.uri),t),decode(e,t){const a=e instanceof gt().Reader?e:new(gt().Reader)(e);let i=void 0===t?a.len:a.pos+t;const s={uri:""};for(;a.pos<i;){const e=a.uint32();if(e>>>3==1)s.uri=a.string();else a.skipType(7&e)}return s},fromJSON:e=>({uri:ft(e.uri)?String(e.uri):""}),toJSON(e){const t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial(e){const t={uri:""};return t.uri=e.uri??"",t}};function ft(e){return null!=e}function Pt(e){return e.type===ht.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:e.fallback?.plaintext||[],trackUri:e.musicTrack?.uri}:{type:"text",startMs:e.startMs,content:e.plaintextContent?.plaintext||[]}}gt().util.Long!==pt()&&(gt().util.Long=pt(),gt().configure());const Ct=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:s,hasMusicAndTalkSegements:n,htmlDescription:r,onExpanded:o,onDescriptionTimestampClick:l,onTranscriptTimestampClick:d,playability:u,segmentCount:p,showUrl:m,transcript:h,transcriptEnabled:x,uri:y,spec:b})=>{const k=(0,D.$P)(),j=(0,i.useMemo)((()=>b.descriptionSectionFactory()),[b]),f=(0,i.useMemo)((()=>j.trackListFactory()),[j]),[P,C]=(0,i.useState)(null),v=(0,i.useCallback)((async e=>{const t=await async function(e){try{const t=await fetch(e,{});if(t.ok&&t.body){const e=await t.arrayBuffer();return yt.decode(new Uint8Array(e)).sections.map(Pt)}return null}catch(e){return null}}(e);C(t)}),[]);(0,i.useEffect)((()=>{h&&h.length>0&&v(h[0].cdnUrl)}),[v,h]);const N=i=>(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Me,{hasDescription:s,contentInformation:t,onTimeStampClick:l,onExpanded:o,description:a,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:u,showHeader:i,spec:j}),n&&(0,Q.jsx)(D.Nh,{spec:f,children:(0,Q.jsx)(dt,{segmentCount:p,uri:y})}),m&&(0,Q.jsx)(g.P,{buttonSize:"sm",className:xe,href:m,component:O.Z,onClick:()=>{k.logInteraction(j.allEpisodesLinkFactory().hitUiNavigate({destination:m}))},children:c.ag.get("episode.see_all_episodes")}),(0,Q.jsx)(pe,{uri:y})]});return(0,Q.jsx)(Q.Fragment,{children:x&&h&&h?.length>0?(0,Q.jsx)(We,{transcriptSections:P,descriptionContent:N(!1),transcriptContent:(0,Q.jsx)(Xe,{transcriptSections:P||[],onTimeStampClick:d,episodeUri:y}),spec:b}):N(!0)})};var vt=a(88435),Nt=a(87093);const Tt="activation-trigger-mme",St=({episodeUri:e,showUri:t,isLocked:a,isPlaying:i,isPlayDisabled:s,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:o})=>{const l=(0,Nt.E)();if((0,B.g)())return(0,Q.jsx)(F.JM,{size:F.qE.lg,onClick:o,isPlaying:i,disabled:s,locked:a,ariaPlayLabel:n,ariaPauseLabel:r});const c=(0,Q.jsx)(vt.l,{showUri:t,enabled:a,renderInline:!1,children:(0,Q.jsx)(F.JM,{size:F.qE.lg,onClick:o,isPlaying:i,disabled:s,locked:a,ariaPlayLabel:n,ariaPauseLabel:r})});return l?(0,Q.jsx)(Ze.D,{id:Tt,targetURI:Je().from(e),fadeOut:!0,children:c}):c};var It=a(31990);const Ut="o6AdXY67I_0xmTg8LBCI",Et="MMZAjWZzcPpNIE06SNuf",wt="Ccgbgvk9PwclKl5rA6Zj",Dt="NHVXJRN6IZANogQjMWei",Mt="orBUEK6aY0SZVOnrDerw",At="ym1d5PDeTaJLIK0SspBF",Lt="Hko6tpIRefr4NKiTEemO",Rt="ptUwXq9IK8IQAOE2UiDA",Ot="mpyCCCudeQ3uBmgrSAcA",Bt=({cardHeaderText:e,cardBodyText:t,buttonText:a,buttonTarget:i})=>(0,n.W6)(we.vp)?(0,Q.jsxs)("div",{className:Lt,children:[(0,Q.jsxs)("div",{className:Rt,children:[(0,Q.jsx)(K.D,{variant:"balladBold",semanticColor:"textBase",children:e}),(0,Q.jsx)(K.D,{semanticColor:"textBase",children:t})]}),(0,Q.jsx)(W.D,{buttonSize:"sm",colorSet:"invertedLight",href:Je().from(i).toURLPath(!0),component:O.Z,children:a})]}):null,Ft=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,htmlDescription:s,onExpanded:n,onTimeStampClick:r,playability:o,showHeader:l=!0})=>{const d=(i||t)&&l;return(0,Q.jsxs)(Q.Fragment,{children:[d&&(0,Q.jsx)(K.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:wt,children:c.ag.get("episode.description-title")}),t&&(0,Q.jsx)(Bt,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),i&&(0,Q.jsx)(Ee.o,{className:Et,onTimeStampClick:r,maxLines:4,onExpanded:n,content:(a||"").trim(),htmlContent:e&&s?s:void 0,enableTimestamps:o.playable})]})},_t=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,htmlDescription:s,onExpanded:n,onTimeStampClick:r,playability:o,showUrl:l,uri:d,seeAllButtonClick:u})=>{return p=!0,(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Ft,{hasDescription:i,contentInformation:t,onTimeStampClick:r,onExpanded:n,description:a,areHTMLDescriptionsEnabled:e,htmlDescription:s,playability:o,showHeader:p}),l&&(0,Q.jsx)(g.P,{onClick:u,buttonSize:"sm",className:Dt,href:l,component:O.Z,children:c.ag.get("episode.see_all_episodes")}),(0,Q.jsx)(pe,{uri:d})]});var p};var Kt=a(82627);const zt="activation-trigger-mme",Wt=({episodeUri:e,showUri:t,isLocked:a,isPlaying:i,isPlayDisabled:s,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:o})=>{const l=(0,Nt.E)(),c=(0,Q.jsx)(vt.l,{showUri:t,enabled:a,renderInline:!1,children:(0,Q.jsx)(Kt.f,{size:"lg",onClick:o,isPlaying:i,disabled:s,locked:a,ariaPlayLabel:n,ariaPauseLabel:r})});return l?(0,Q.jsx)(Ze.D,{id:zt,targetURI:Je().from(e),fadeOut:!0,children:c}):c};var Ht=a(26492),Jt=a(80219),Zt=a(61901),qt=a(53538),Xt=a(23716),Yt=a(69691),$t=a(37483),Vt=a(89744),Gt=a(95134),Qt=a(20246),ea=a(87257),ta=a(52759);const aa=({podcastShort:e,onPlayEpisode:t,isPlaying:a,isActive:s,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,onDownloadClick:d,onContextMenuClick:u})=>{const{uri:p,playedState:g,contentRating:h,playability:k}=e,j=(0,m.I0)(),[f]=(0,ta.z)(1e4,(e=>e?.item?.uri===p)),P=(0,E.Y)((e=>e?.duration)),{badges:C,hasBadges:v}=(0,L.r)({contentRating:h?.label}),N=(0,i.useCallback)((e=>{!k.playable&&C.nineteen&&(e.stopPropagation(),j((0,x.RM)(p||"")))}),[p,k.playable,C.nineteen,j]),T=!l&&!e.playability.playable,I=c.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),U=c.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),w=e.podcast?.uri;return(0,Q.jsxs)(y.o,{backgroundColor:o,children:[(0,Q.jsxs)("div",{className:Ot,children:[v&&(0,Q.jsxs)(Gt.g,{children:[C.nineteen&&(0,Q.jsx)(S.X,{className:Mt,size:16}),C.explicit?(0,Q.jsx)(ea.N,{}):null]}),(0,Q.jsx)(y.F,{children:(0,Q.jsx)(A.E,{size:A.$.LARGE,fullyPlayed:n,durationMs:s&&P?P:e.duration.milliseconds,releaseDate:ra(e.releaseDate?.isoString),resumePositionMs:g.playPositionMilliseconds,isPlaying:a,position:s&&f||void 0})})]}),(0,Q.jsxs)(y.F,{children:[(0,Q.jsx)("div",{onClick:N,children:(0,Q.jsx)(Wt,{episodeUri:e.uri,showUri:w,isLocked:l,onClick:()=>{t(g.playPositionMilliseconds,!1)},isPlaying:a,isPlayDisabled:T,playButtonPlayLabel:I,playButtonPauseLabel:U})}),!l&&(0,Q.jsx)($t.p,{onClick:d,uri:e.uri,showUri:w}),(0,Q.jsx)(Qt.y,{onShow:u,menu:(0,Q.jsx)(Vt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:w,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r,userCreated:e.userCreated}),children:(0,Q.jsx)(b.z,{label:c.ag.get("more.label.context",e.name)})})]})]})};var ia=a(91355);const sa=({podcastShort:e,isFullyPlayed:t,setIsFullyPlayed:a,backgroundColor:i,spec:s})=>{const{uri:n,name:r,sharingInfo:o,playedState:l,episodeType:d,releaseDate:u,userCreated:p}=e,m=(0,D.$P)(),g=function(e,t,a,i,s){const n=t===M.Wf.Episode;return(0,ia.G3)(e,i,a,s)?(0,Q.jsx)(ia.Fg,{isMusicAndTalk:n}):n?c.ag.get("type.showEpisode"):c.ag.get("type.podcastEpisode")}(n,d||M.Wf.Unknown,l.playPositionMilliseconds,ra(u?.isoString),l.state===M.sY.Completed),h=e.podcast?.uri;return(0,Q.jsxs)(j.gF,{backgroundColor:i,children:[(0,Q.jsx)(f.W,{children:(0,Q.jsx)(P.i,{text:e.name,dragUri:n,dragLabel:e.name})}),(0,Q.jsx)("div",{className:At,children:p?.userUri&&(0,Q.jsx)(T._,{menu:(0,Q.jsx)(Vt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:h,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a,userCreated:p}),children:(0,Q.jsx)(j.Oe,{loading:"eager",name:e.name,images:e.coverArt,placeholderType:"episode",shape:j.Kc.ROUNDED_CORNERS})})}),(0,Q.jsxs)(j.sP,{children:[(0,Q.jsx)(j.dy,{small:!0,uppercase:!0,children:g}),p?.userUri&&(0,Q.jsx)(T._,{menu:(0,Q.jsx)(Vt.v,{uri:n,sharingInfo:o,showUri:h,contextUri:n,isPlayed:t,onMarkAsPlayed:a,userCreated:p}),children:(0,Q.jsx)(j.xd,{dragUri:n,dragLabel:r,children:r})}),p?.userUri&&(0,Q.jsx)(T._,{menu:(0,Q.jsx)(Vt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:h,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a,userCreated:p}),children:(0,Q.jsx)(C.Z,{onClick:()=>{const e=s.hitUiNavigate({destination:p?.userUri??""});m.logInteraction(e)},to:p.userUri,children:(0,Q.jsx)(j.dy,{large:!0,bold:!0,children:(0,Q.jsx)("span",{"data-testid":"showTitle",children:p?.displayName})})})})]})]})},na=({podcastShort:e})=>{const{uri:t,episodeType:a,description:s,htmlDescription:r,podcastSubscription:o,segmentsCount:l,podcast:p,contentInformation:m,playedState:g,coverArt:h,userCreated:x}=e,{spec:y}=(0,D.fU)(It.createDesktopPodcastShortEventFactory,{data:{uri:t}}),b=i.useMemo((()=>y.userProfileLinkFactory({uri:t})),[y,t]),k=i.useMemo((()=>y.actionBarFactory()),[y]),[j,f]=(0,i.useState)(g.state===M.sY.Completed),P=(0,Xt.g)(),C=(0,Ht.o)(),v=(0,n.W6)(we.Cz),N=void 0!==l&&l>0,T=(0,B.g)(),{triggerPlay:S,togglePlay:I,isActive:w}=(0,U.n)({uri:t},{featureIdentifier:"episode"}),{isPlaying:A,isActive:L}=(0,Yt.$o)(t),R=h[0].url,O=(0,Zt.Zj)(R||null),F=(0,E.Y)((e=>e?.isPaused??void 0)),_=(0,Nt.E)(),K=o?.isPaywalled&&!o.isUserSubscribed,z=(0,Jt.s)(e,p),W=(0,D.$P)(),H=(0,i.useCallback)(((e,i=!0,s)=>{const n=()=>{F?P.resume():P.pause()};if(K)return;let r="play";if(!A||0!==e&&i||(r="pause"),C({intent:r,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),a===M.Wf.Episode&&_)u.y.set((()=>({triggerId:s||zt,triggerAction:null})));else if(w&&!i)if(T)n();else{const e=(0,qt.aK)({isPlaying:A,isActive:L,spec:y.actionBarFactory().playButtonFactory(),logger:W,uri:t});I({loggingParams:e})}else L?n():T?z({seekTo:e}):S({seekTo:e})}),[K,A,C,t,L,y,W,I,a,_,w,F,P,T,z,S]),J=(0,i.useCallback)((()=>{(0,qt.qq)(k,W)}),[k,W]),Z=(0,i.useCallback)(((e,a)=>{(0,qt.l7)(a,k.downloadButtonFactory(),W,t)}),[W,t,k]),q=(0,i.useCallback)((()=>{C({intent:"expand-description",type:"click"})}),[C]),X=(0,i.useCallback)((()=>{const e=x?.userUri??"",t=y.seeAllEpisodesButtonFactory({uri:e}).hitUiNavigate({destination:e});W.logInteraction(t)}),[x,W,y]);(0,i.useEffect)((()=>{const t=new URLSearchParams(location.search);if(t.has("t")){const a=t.get("t")||"0",i=1e3*parseInt(a,10);i<=e.duration.milliseconds&&H(i)}}),[H,e.duration.milliseconds]);const Y=!!s||v&&!!r,$=e.podcast?.uri,V=Je().from($)?.toURLPath(!0);return(0,Q.jsxs)("section",{"data-testid":"episode",className:Ut,children:[(0,Q.jsx)(d.$,{children:c.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})}),(0,Q.jsx)(sa,{podcastShort:e,isFullyPlayed:j,setIsFullyPlayed:f,backgroundColor:O,spec:b}),(0,Q.jsx)(aa,{podcastShort:e,onPlayEpisode:H,isPlaying:A,isActive:L||w,isFullyPlayed:j,setIsFullyPlayed:f,backgroundColor:O,isLocked:!!K,onContextMenuClick:J,onDownloadClick:Z}),(0,Q.jsx)("div",{className:"contentSpacing",children:(0,Q.jsx)(_t,{seeAllButtonClick:X,hasDescription:Y,contentInformation:m,onTimeStampClick:H,onExpanded:q,description:e.description,areHTMLDescriptionsEnabled:v,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:N,segmentCount:l,uri:e.uri,showUrl:V})})]})};function ra(e){return e?.replace(/T.*/,"")||""}var oa=a(11486),la=a(52404),ca=a(86649),da=a(52586),ua=a(65732),pa=a(87834),ma=a(51871),ga=a(25988),ha=a(94223);const xa=({episode:e,onPlayEpisode:t,isPlaying:a,isActive:s,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,spec:d})=>{const{uri:u,playedState:p,contentRating:g,playability:h}=e,k=(0,D.$P)(),j=(0,m.I0)(),[f]=(0,ta.z)(1e4,(e=>e?.item?.uri===u)),P=(0,E.Y)((e=>e?.duration)),{badges:C}=(0,L.r)({contentRating:g?.label}),v=(0,i.useCallback)((e=>{!h.playable&&C.nineteen&&(e.stopPropagation(),j((0,x.RM)(u||"")))}),[u,h.playable,C.nineteen,j]),N=(0,i.useCallback)((()=>{const e=d.contextMenuButtonFactory().hitUiReveal();k.logInteraction(e)}),[k,d]),T=(0,i.useCallback)(((e,t)=>{(0,qt.l7)(t,d.downloadButtonFactory(),k,u)}),[k,d,u]),I=(0,i.useCallback)((e=>{const t=d.saveButtonFactory();k.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u}))}),[k,d,u]),U=!l&&!e.playability.playable,w=c.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),M=c.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),R=e.podcast?.uri;return(0,Q.jsxs)(y.o,{backgroundColor:o,children:[(0,Q.jsxs)(y.F,{children:[C.nineteen&&(0,Q.jsx)(S.X,{className:ye,size:16}),(0,Q.jsx)(A.E,{size:A.$.LARGE,fullyPlayed:n,durationMs:s&&P?P:e.duration.milliseconds,releaseDate:ja(e.releaseDate?.isoString),resumePositionMs:p.playPositionMilliseconds,isPlaying:a,position:s&&f||void 0})]}),(0,Q.jsxs)(y.F,{children:[(0,Q.jsx)("div",{onClick:v,children:(0,Q.jsx)(St,{episodeUri:e.uri,showUri:R,isLocked:l,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:a,isPlayDisabled:U,playButtonPlayLabel:w,playButtonPauseLabel:M})}),!l&&(0,Q.jsx)($t.p,{uri:e.uri,showUri:R,onClick:T}),(0,Q.jsx)(ma.w,{uri:e.uri,size:ha.qE.md,onClick:I}),(0,Q.jsx)(Qt.y,{onShow:N,menu:(0,Q.jsx)(ga.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:R,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r}),children:(0,Q.jsx)(b.z,{label:c.ag.get("more.label.context",e.name)})})]})]})};const ya=({episode:e,isFullyPlayed:t,setIsFullyPlayed:a,backgroundColor:s,spec:n})=>{const{uri:r,name:o,sharingInfo:d,playedState:u,episodeType:p,releaseDate:m}=e,g=(0,D.$P)(),h=function(e,t,a,i,s){const n=t===M.Wf.Episode;return(0,ia.G3)(e,i,a,s)?(0,Q.jsx)(ia.Fg,{isMusicAndTalk:n}):n?c.ag.get("type.showEpisode"):c.ag.get("type.podcastEpisode")}(r,p||M.Wf.Unknown,u.playPositionMilliseconds,ja(m?.isoString),u.state===M.sY.Completed),x=e.podcast?.uri,y=function(e){const t=(0,l.EC)(e);return`/show/${(0,l.HB)(t?.id||"")}`}(x),b=(0,i.useCallback)((()=>{g.logInteraction(n.podcastLinkFactory().hitUiNavigate({destination:y}))}),[g,y,n]);return(0,Q.jsxs)(j.gF,{backgroundColor:s,children:[(0,Q.jsx)(f.W,{children:(0,Q.jsx)(P.i,{text:e.name,dragUri:r,dragLabel:e.name})}),(0,Q.jsx)("div",{className:be,children:(0,Q.jsx)(T._,{menu:(0,Q.jsx)(ga.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:x,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a}),children:(0,Q.jsx)(j.Oe,{loading:"eager",name:e.name,images:e.coverArt,placeholderType:"episode",shape:j.Kc.ROUNDED_CORNERS})})}),(0,Q.jsxs)(j.sP,{children:[(0,Q.jsx)(j.dy,{small:!0,uppercase:!0,children:h}),(0,Q.jsx)(T._,{menu:(0,Q.jsx)(ga.k,{uri:r,sharingInfo:d,showUri:x,contextUri:r,isPlayed:t,onMarkAsPlayed:a}),children:(0,Q.jsx)(j.xd,{dragUri:r,dragLabel:o,children:(0,Q.jsx)("span",{"data-testid":"episodeTitle",children:o})})}),(0,Q.jsx)(T._,{menu:(0,Q.jsx)(ga.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:x,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a}),children:(0,Q.jsx)(j.dy,{large:!0,bold:!0,children:(0,Q.jsx)(C.Z,{to:y,onClick:b,children:(0,Q.jsx)("span",{"data-testid":"showTitle",children:e.podcast?.name})})})})]})]})},ba=({episode:e})=>{const{uri:t,episodeType:a,description:s,htmlDescription:o,podcastSubscription:p,segmentsCount:m,podcast:g,contentInformation:h,playedState:x,coverArt:y}=e;(0,da.e)();const{spec:b,logger:k}=(0,D.fU)(r.createDesktopEpisodeEventFactory,{data:{uri:t}}),j=(0,i.useMemo)((()=>b.headerFactory()),[b]),f=(0,i.useMemo)((()=>b.actionBarFactory()),[b]),[P,C]=(0,i.useState)(x.state===M.sY.Completed),v=(0,Xt.g)(),N=(0,Ht.o)(),T=(0,n.W6)(we.Cz),S=void 0!==m&&m>0,I=(0,n.W6)(we.WE,{loadingValue:!1}),w=(0,B.g)(),{triggerPlay:A,togglePlay:L,isActive:R}=(0,U.n)({uri:t},{featureIdentifier:"episode"}),{isPlaying:O,isActive:F}=(0,Yt.$o)(t),_=y[0].url,K=(0,Zt.Zj)(_||null),z=(0,E.Y)((e=>e?.isPaused??void 0)),W=(0,Nt.E)(),H=p.isPaywalled&&!p.isUserSubscribed,J=F||R,Z=(0,Jt.s)(e,g),q=(0,i.useCallback)(((e,i,s,n)=>{const r=()=>{z?(n?.("resume"),v.resume()):(n?.("pause"),v.pause())};if(H)return;let o="play";if(!O||0!==e&&i||(o="pause"),N({intent:o,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),a===M.Wf.Episode&&W)u.y.set((()=>({triggerId:s||Tt,triggerAction:null})));else if(R&&!i)w?r():L({loggingParams:n?.()});else if(F&&!i)r();else{const t=n?.("play");w?Z({seekTo:e,loggingParams:t}):A({seekTo:e,loggingParams:t})}}),[H,O,N,t,a,W,F,R,w,z,v,L,Z,A]),X=(0,i.useCallback)((e=>{q(e,!1,void 0,(e=>{const a=b.actionBarFactory().playButtonFactory();let i;return i="pause"===e||O?a.hitPause({itemToBePaused:t}):"resume"===e||J?a.hitResume({itemToBeResumed:t}):a.hitPlay({itemToBePlayed:t}),k.logInteraction(i)}))}),[q,J,O,k,b,t]),Y=(0,i.useCallback)((e=>{q(e,!0,void 0,(()=>k.logInteraction(b.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[q,k,b,t]),$=(0,i.useCallback)(((e,a)=>{q(e,!0,a,(()=>k.logInteraction(b.transcriptSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[q,k,b,t]),V=(0,i.useCallback)((()=>{N({intent:"expand-description",type:"click"})}),[N]);(0,i.useEffect)((()=>{if(e&&!J){const t=new URLSearchParams(location.search);if(t.has("t")){const a=t.get("t")||"0",i=1e3*parseInt(a,10);i<=e.duration.milliseconds&&q(i,!0)}}}),[e,J]);const G=!!s||T&&!!o,ee=e.podcast?.uri,te=(0,l.EC)(ee)?.toURLPath(!0);return(0,Q.jsxs)("section",{"data-testid":"episode",className:me,children:[(0,Q.jsx)(d.$,{children:c.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})}),(0,Q.jsx)(ya,{episode:e,isFullyPlayed:P,setIsFullyPlayed:C,backgroundColor:K,spec:j}),(0,Q.jsx)(xa,{episode:e,onPlayEpisode:X,isPlaying:O,isActive:J,isFullyPlayed:P,setIsFullyPlayed:C,backgroundColor:K,isLocked:H,spec:f}),(0,Q.jsx)("div",{className:"contentSpacing",children:(0,Q.jsx)(Ct,{transcriptEnabled:I,transcript:e.transcript,hasDescription:G,contentInformation:h,onDescriptionTimestampClick:Y,onTranscriptTimestampClick:$,onExpanded:V,description:e.description,areHTMLDescriptionsEnabled:T,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:S,segmentCount:m,uri:e.uri,showUrl:te,spec:b})})]})},ka=i.memo((function(){const{episodeId:e}=(0,s.UO)(),t=(0,l.YD)(e).toURI(),a=(0,n.W6)(we.uB),r=(0,n.W6)(we.Nf),d=(0,n.W6)(we.IV,{loadingValue:!1}),u=(0,la.I)(t,a),m=(0,oa.V)("episode",u);return m?(0,Q.jsx)(ua.w,{to:m}):u?(0,ca.Ey)(u)?d?(0,Q.jsx)(ua.w,{to:(0,l.EC)(u.book?.uri).toURLPath(!0)}):(0,Q.jsx)(i.Suspense,{fallback:null,children:(0,Q.jsx)(pa.C,{pageId:o.Wg.PODCAST_EPISODE_AUDIOBOOK,uri:t,children:(0,Q.jsx)(le,{chapter:u})})}):(0,ca.Qj)(u)&&r?(0,Q.jsx)(i.Suspense,{fallback:null,children:(0,Q.jsx)(pa.C,{pageId:o.Wg.PODCAST_EPISODE,uri:t,children:(0,Q.jsx)(na,{podcastShort:u})})}):(0,Q.jsx)(i.Suspense,{fallback:null,children:(0,Q.jsx)(pa.C,{pageId:o.Wg.PODCAST_EPISODE,uri:t,children:(0,Q.jsx)(ba,{episode:u})})}):(0,Q.jsx)(p.h,{hasError:!1,errorMessage:c.ag.get("error.not_found.title.podcast")})}));function ja(e){return e?.replace(/T.*/,"")||""}},40080:(e,t,a)=>{a.d(t,{D:()=>s});var i=a(67294);function s(e){const t=(0,i.useRef)();return(0,i.useEffect)((()=>{t.current=e}),[e]),t.current}},13759:(e,t,a)=>{a.d(t,{E:()=>T,$:()=>N});var i=a(43315),s=a(67294);const n="wIA_5Ypq0rltNPeZQpM4",r="Swi6YtNEFCCVz8l4y75v",o="pklLPOhfigdytL9bPoth",l="sb24Y8kdMZInJ8aI8dXT";var c=a(85893);class d extends s.PureComponent{static defaultProps={current:0,max:1};render(){const{ariaValueText:e,max:t,current:a}=this.props,i=t&&a?100*Math.min(1,a/t):0,s={transform:`translateX(-${100-i}%)`},d=e||`${Math.round(i)}%`;return(0,c.jsxs)("div",{className:n,role:"progressbar",tabIndex:0,"aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":t,"aria-valuetext":d,children:[(0,c.jsx)("div",{className:r}),(0,c.jsx)("div",{className:o,children:(0,c.jsx)("div",{"data-testid":"progressBarFg",className:l,style:s})})]})}}const u=d,p="qfYkuLpETFW3axnfMntO",m="jOd7lbjiyc_kvRJaAbeL",g="_q93agegdE655O5zPz6l",h="z7Yl7CIT1AB0y91f_moh",x="iLIlkUcfIq56KncGtX7u",y="nV50yZ6BR_TIuWP3l7b1",b="qLjIx_SzBEpDRA_q7kxQ";var k=a(32667),j=a(28066),f=a(96206),P=a(94184),C=a.n(P),v=a(29723);let N;!function(e){e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL"}(N||(N={}));const T=e=>{const{resumePositionMs:t=0,releaseDate:a,isPlaying:s,fullyPlayed:n,durationMs:r,size:o=N.SMALL,position:l=t}=e;return(0,c.jsxs)("div",{className:C()(p,{[m]:o===N.LARGE}),children:[a?(0,c.jsx)(k.D,{as:"p",variant:"mesto",className:g,children:(0,i.rL)((0,i.RX)(a))}):null,(()=>{if(n&&!s)return(0,c.jsxs)("div",{className:x,children:[(0,c.jsx)(k.D,{as:"p",variant:"mesto",className:h,children:f.ag.get("episode.played")}),(0,c.jsx)(j.N,{iconSize:16,className:b,"aria-hidden":"true"})]});if(l>0||s){const e=Math.ceil(Math.max(r-l,0));return(0,c.jsx)("div",{className:x,children:(0,c.jsx)(k.D,{as:"p",variant:"mesto",className:h,children:(0,c.jsx)(v.ng,{durationMs:e})})})}return(0,c.jsx)(k.D,{as:"p",variant:"mesto",className:g,children:(0,c.jsx)(v.nL,{durationMs:r})})})(),!n&&l>0||s?(0,c.jsx)("div",{className:y,children:(0,c.jsx)(u,{current:l,max:r,isEnabled:!1})}):null]})}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map